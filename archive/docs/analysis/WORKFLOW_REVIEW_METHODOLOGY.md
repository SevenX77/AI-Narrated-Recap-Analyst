# å·¥ä½œæµReviewæ–¹æ³•è®º (Workflow Review Methodology)

**åˆ›å»ºæ—¥æœŸ**: 2026-02-12  
**ç›®çš„**: å»ºç«‹ç³»ç»Ÿæ€§çš„å·¥ä½œæµReviewæµç¨‹ï¼Œä»ç”¨æˆ·éœ€æ±‚å‡ºå‘ï¼Œé€å±‚æ·±å…¥åˆ°æ¯ä¸ªç»†èŠ‚

---

## ğŸ“ Reviewæ–¹æ³•è®ºæ¡†æ¶

### æ ¸å¿ƒåŸåˆ™
1. **ç”¨æˆ·è§†è§’ä¼˜å…ˆ**: ä»ç”¨æˆ·çœŸå®éœ€æ±‚å‡ºå‘ï¼Œè€Œéä»£ç å®ç°
2. **å…¨é“¾è·¯è¿½è¸ª**: ç”¨æˆ·æ“ä½œ â†’ å‰ç«¯ â†’ API â†’ åç«¯ â†’ æ•°æ® â†’ è¿”å›
3. **æ•°æ®é©±åŠ¨**: åŸºäºå®é™…æ•°æ®æ–‡ä»¶ï¼Œè€Œéæ–‡æ¡£æè¿°
4. **åˆ†å±‚è¯Šæ–­**: é€å±‚å®šä½é—®é¢˜æ ¹æº
5. **å¯é‡åŒ–è¯„ä¼°**: æ¯ä¸ªç¯èŠ‚ç»™å‡ºå…·ä½“è¯„åˆ†å’Œé—®é¢˜æ¸…å•

---

## ğŸ” Reviewæµç¨‹ï¼ˆ5å±‚åˆ†ææ³•ï¼‰

```
Layer 1: ç”¨æˆ·éœ€æ±‚å±‚ (User Story Layer)
    â†“
Layer 2: å‰ç«¯äº¤äº’å±‚ (Frontend Interaction Layer)
    â†“
Layer 3: APIå¥‘çº¦å±‚ (API Contract Layer)
    â†“
Layer 4: åç«¯å®ç°å±‚ (Backend Implementation Layer)
    â†“
Layer 5: æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)
```

---

## Layer 1: ç”¨æˆ·éœ€æ±‚å±‚åˆ†æ

### ç›®æ ‡
å®šä¹‰ç”¨æˆ·çš„**çœŸå®éœ€æ±‚**å’Œ**æœŸæœ›ä½“éªŒ**

### åˆ†æç»´åº¦

#### 1.1 ç”¨æˆ·è§’è‰²å®šä¹‰
- **ä¸»è¦ç”¨æˆ·**: å†…å®¹åˆ†æå¸ˆã€ç¼–å‰§ã€åˆ¶ç‰‡äºº
- **ä½¿ç”¨åœºæ™¯**: åˆ†æå°è¯´æ”¹ç¼–è„šæœ¬çš„è´¨é‡
- **æ ¸å¿ƒè¯‰æ±‚**: 
  - å¿«é€Ÿäº†è§£æ”¹ç¼–å·®å¼‚
  - è¯†åˆ«å‰§æƒ…åˆ å‡/æ–°å¢
  - è¯„ä¼°æ”¹ç¼–è´¨é‡

#### 1.2 ç”¨æˆ·æ—…ç¨‹æ˜ å°„ (User Journey Map)

```
é˜¶æ®µ1: é¡¹ç›®åˆ›å»ºä¸æ–‡ä»¶ä¸Šä¼ 
    ç”¨æˆ·ç›®æ ‡: å¿«é€Ÿä¸Šä¼ å°è¯´å’Œè„šæœ¬æ–‡ä»¶
    é¢„æœŸä½“éªŒ: 
        - æ‹–æ‹½ä¸Šä¼ ï¼Œæ”¯æŒå¤šæ–‡ä»¶
        - è‡ªåŠ¨è¯†åˆ«æ–‡ä»¶ç±»å‹
        - å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
        - ä¸Šä¼ åè‡ªåŠ¨å¼€å§‹é¢„å¤„ç†
    æˆåŠŸæ ‡å‡†:
        âœ“ ä¸Šä¼ æˆåŠŸç‡ > 99%
        âœ“ æ–‡ä»¶è¯†åˆ«å‡†ç¡®ç‡ 100%
        âœ“ é¢„å¤„ç†è‡ªåŠ¨è§¦å‘
        âœ“ è¿›åº¦å®æ—¶å¯è§

é˜¶æ®µ2: é¢„å¤„ç†ä¸åŸºç¡€ä¿¡æ¯æŸ¥çœ‹
    ç”¨æˆ·ç›®æ ‡: ç¡®è®¤æ–‡ä»¶å·²æ­£ç¡®è§£æ
    é¢„æœŸä½“éªŒ:
        - çœ‹åˆ°ç« èŠ‚æ•°é‡ï¼ˆNovelï¼‰
        - çœ‹åˆ°é›†æ•°ä¿¡æ¯ï¼ˆScriptï¼‰
        - çœ‹åˆ°åŸºæœ¬å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€ä½œè€…ã€ç®€ä»‹ï¼‰
        - é¢„å¤„ç†è¿›åº¦å¯è§†åŒ–
    æˆåŠŸæ ‡å‡†:
        âœ“ ç« èŠ‚æ£€æµ‹å‡†ç¡®ç‡ > 95%
        âœ“ å…ƒæ•°æ®æå–å®Œæ•´åº¦ > 90%
        âœ“ é¢„å¤„ç†å®Œæˆæ—¶é—´ < 5åˆ†é’Ÿï¼ˆ50ç« å°è¯´ï¼‰

é˜¶æ®µ3: å°è¯´å†…å®¹æŸ¥çœ‹ä¸åˆ†æ
    ç”¨æˆ·ç›®æ ‡: æ·±å…¥ç†è§£å°è¯´ç»“æ„
    é¢„æœŸä½“éªŒ:
        - ç« èŠ‚å¯¼èˆªæµç•…ï¼ˆå·¦ä¾§ç›®å½•ï¼‰
        - åŸæ–‡æŸ¥çœ‹æ¸…æ™°ï¼ˆMarkdownæ¸²æŸ“ï¼‰
        - åˆ†æ®µç»“æœå¯è§†åŒ–ï¼ˆABCåˆ†ç±»ï¼‰
        - æ ‡æ³¨ç»“æœå¯æŸ¥è¯¢ï¼ˆäº‹ä»¶æ—¶é—´çº¿ï¼‰
        - ç³»ç»Ÿå…ƒç´ ç›®å½•å¯æµè§ˆ
    æˆåŠŸæ ‡å‡†:
        âœ“ ç« èŠ‚åˆ‡æ¢å“åº” < 500ms
        âœ“ åˆ†æ®µå‡†ç¡®ç‡ 100%ï¼ˆTwo-Passä¿è¯ï¼‰
        âœ“ äº‹ä»¶æå–å®Œæ•´åº¦ > 90%
        âœ“ UI/UXç›´è§‚æ˜“æ‡‚

é˜¶æ®µ4: è„šæœ¬å†…å®¹æŸ¥çœ‹ä¸åˆ†æ
    ç”¨æˆ·ç›®æ ‡: ç†è§£è„šæœ¬å™äº‹ç»“æ„
    é¢„æœŸä½“éªŒ:
        - é›†æ•°å¯¼èˆªæµç•…
        - åŸæ–‡æŸ¥çœ‹ï¼ˆå¸¦æ—¶é—´è½´ï¼‰
        - åˆ†æ®µç»“æœå¯è§†åŒ–ï¼ˆABCåˆ†ç±»ï¼‰
        - Hookä¿¡æ¯çªå‡ºæ˜¾ç¤ºï¼ˆep01ï¼‰
    æˆåŠŸæ ‡å‡†:
        âœ“ é›†æ•°åˆ‡æ¢å“åº” < 500ms
        âœ“ æ—¶é—´è½´æ ‡æ³¨å®Œæ•´
        âœ“ Hookæ£€æµ‹å‡†ç¡®ç‡ > 85%

é˜¶æ®µ5: å°è¯´-è„šæœ¬å¯¹é½æŸ¥çœ‹
    ç”¨æˆ·ç›®æ ‡: å¯¹æ¯”æ”¹ç¼–å·®å¼‚
    é¢„æœŸä½“éªŒ:
        - å¯¹é½å…³ç³»å¯è§†åŒ–ï¼ˆSankeyå›¾/æ—¶é—´è½´ï¼‰
        - æ”¹ç¼–ç±»å‹æ ‡æ³¨ï¼ˆåŸæ ·/ç®€åŒ–/æ‰©å±•/åˆ é™¤/æ–°å¢ï¼‰
        - å¯¹é½ç½®ä¿¡åº¦æ˜¾ç¤º
        - å¿«é€Ÿå®šä½æ”¹ç¼–é‡ç‚¹
    æˆåŠŸæ ‡å‡†:
        âœ“ å¯¹é½å‡†ç¡®ç‡ > 80%
        âœ“ å¯è§†åŒ–ç›´è§‚æ˜“æ‡‚
        âœ“ æ”¯æŒäº¤äº’å¼æ¢ç´¢

é˜¶æ®µ6: å·¥ä½œæµæ‰‹åŠ¨æ§åˆ¶
    ç”¨æˆ·ç›®æ ‡: çµæ´»æ§åˆ¶å¤„ç†æµç¨‹
    é¢„æœŸä½“éªŒ:
        - å¯é€‰æ‹©æ‰§è¡ŒæŸä¸€æ­¥éª¤ï¼ˆå¦‚åªåšåˆ†æ®µï¼‰
        - å¯é€‰æ‹©å¤„ç†ç‰¹å®šç« èŠ‚/é›†æ•°
        - å®æ—¶æŸ¥çœ‹å¤„ç†è¿›åº¦
        - é”™è¯¯å¯é‡è¯•
    æˆåŠŸæ ‡å‡†:
        âœ“ åˆ†æ­¥éª¤è§¦å‘å¯ç”¨
        âœ“ æ‰¹é‡å¤„ç†æ”¯æŒ
        âœ“ é”™è¯¯æç¤ºæ˜ç¡®
        âœ“ é‡è¯•æœºåˆ¶å®Œå–„
```

### 1.3 ç—›ç‚¹è¯†åˆ«

| ç—›ç‚¹ | å½±å“ç¨‹åº¦ | å½“å‰çŠ¶æ€ |
|------|---------|---------|
| ä¸Šä¼ åçœ‹ä¸åˆ°å¤„ç†ç»“æœ | ğŸ”´ è‡´å‘½ | âŒ processed/ç›®å½•ä¸å­˜åœ¨ |
| æ— æ³•æŸ¥çœ‹åˆ†æ®µ/æ ‡æ³¨ç»“æœ | ğŸ”´ è‡´å‘½ | âŒ å‰ç«¯æœªå®ç°æŸ¥çœ‹åŠŸèƒ½ |
| æ— æ³•æ‰‹åŠ¨æ§åˆ¶å·¥ä½œæµæ­¥éª¤ | ğŸ”´ é«˜ | âŒ åªèƒ½å…¨éƒ¨é‡è·‘é¢„å¤„ç† |
| é¢„å¤„ç†å¤±è´¥æ— è¯¦ç»†é”™è¯¯ä¿¡æ¯ | ğŸŸ¡ ä¸­ | âš ï¸ é”™è¯¯æç¤ºä¸æ˜ç¡® |
| å¯¹é½ç»“æœæ— æ³•æŸ¥çœ‹ | ğŸŸ¡ ä¸­ | âŒ å®Œå…¨æœªå®ç° |

---

## Layer 2: å‰ç«¯äº¤äº’å±‚åˆ†æ

### ç›®æ ‡
è¯„ä¼°å‰ç«¯æ˜¯å¦æ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œäº¤äº’æ˜¯å¦æµç•…

### åˆ†æç»´åº¦

#### 2.1 é¡µé¢å®Œæ•´æ€§æ£€æŸ¥

```
æ ¸å¿ƒé¡µé¢æ¸…å•:
â”œâ”€â”€ Dashboard (é¡¹ç›®åˆ—è¡¨)              âœ… å·²å®ç°
â”œâ”€â”€ ProjectDetailPage (é¡¹ç›®è¯¦æƒ…)      âš ï¸ éƒ¨åˆ†å®ç°
â”œâ”€â”€ NovelViewerPage (å°è¯´æŸ¥çœ‹å™¨)      ğŸ”´ ä»…åŸæ–‡ï¼Œæ— åˆ†æç»“æœ
â”œâ”€â”€ ScriptViewerPage (è„šæœ¬æŸ¥çœ‹å™¨)     ğŸ”´ ä»…åŸæ–‡ï¼Œæ— åˆ†æç»“æœ
â”œâ”€â”€ WorkflowControlPage (å·¥ä½œæµæ§åˆ¶)  âŒ å®Œå…¨æœªå®ç°
â”œâ”€â”€ AlignmentViewerPage (å¯¹é½æŸ¥çœ‹)    âŒ å®Œå…¨æœªå®ç°
â””â”€â”€ SettingsPage (è®¾ç½®)               âŒ å®Œå…¨æœªå®ç°
```

#### 2.2 äº¤äº’å®Œæ•´æ€§æ£€æŸ¥

é’ˆå¯¹æ¯ä¸ªé¡µé¢ï¼Œæ£€æŸ¥ï¼š

**Dashboardé¡µé¢**:
```
âœ… é¡¹ç›®å¡ç‰‡å±•ç¤º
âœ… åˆ›å»ºé¡¹ç›®å¯¹è¯æ¡†
âœ… é¡¹ç›®ç¼–è¾‘/åˆ é™¤
âœ… ç»Ÿè®¡æ•°æ®å±•ç¤º
è¯„åˆ†: 95/100 (ä¼˜ç§€)
```

**ProjectDetailPageé¡µé¢**:
```
âœ… é¡¹ç›®åŸºæœ¬ä¿¡æ¯å±•ç¤º
âœ… æ–‡ä»¶ä¸Šä¼ ï¼ˆæ‹–æ‹½æ”¯æŒï¼‰
âœ… åŸå§‹æ–‡ä»¶åˆ—è¡¨ï¼ˆæŠ˜å å¼ï¼‰
âœ… é¢„å¤„ç†çŠ¶æ€è¿½è¸ª
âš ï¸ ç« èŠ‚/é›†æ•°å¡ç‰‡ï¼ˆç‚¹å‡»è·³è½¬ï¼Œä½†æ— æ•°æ®ï¼‰
âŒ åˆ†æ­¥éª¤å·¥ä½œæµè§¦å‘ï¼ˆç¼ºå¤±ï¼‰
âŒ å¤„ç†ç»“æœé¢„è§ˆï¼ˆç¼ºå¤±ï¼‰

é—®é¢˜è¯¦æƒ…:
1. ç¡¬ç¼–ç é—®é¢˜ï¼ˆç¬¬382è¡Œï¼‰:
   onClick={() => setViewingFile({ name: file.name, category: file.category })}
   src={projectsApiV2.getFileViewUrl(...)}  // âœ… ä½¿ç”¨äº†APIæ–¹æ³•
   
2. "Process"æŒ‰é’®åŠŸèƒ½æ¨¡ç³Šï¼ˆç¬¬368è¡Œï¼‰:
   onClick={() => retryPreprocessMutation.mutate()}
   â†’ åªæ˜¯é‡æ–°è§¦å‘é¢„å¤„ç†ï¼Œä¸æ˜¯åˆ†æ­¥éª¤æ‰§è¡Œ
   
3. ç« èŠ‚/é›†æ•°å¡ç‰‡æ— æ•°æ®ï¼ˆç¬¬254-308è¡Œï¼‰:
   onClick={() => navigate(`/project/${projectId}/novel`)}
   â†’ è·³è½¬åˆ°NovelViewerPageï¼Œä½†è¯¥é¡µé¢æ— æ³•å±•ç¤ºæ•°æ®

è¯„åˆ†: 65/100 (åŠæ ¼ï¼Œä½†é—®é¢˜æ˜æ˜¾)
```

**NovelViewerPageé¡µé¢**:
```
âœ… ç« èŠ‚å¯¼èˆªï¼ˆå·¦ä¾§æ ï¼‰
âœ… MarkdownåŸæ–‡æ¸²æŸ“
âŒ è§†å›¾æ¨¡å¼åˆ‡æ¢ï¼ˆåŸæ–‡/åˆ†æ®µ/æ ‡æ³¨ï¼‰
âŒ åˆ†æ®µç»“æœå±•ç¤º
âŒ æ ‡æ³¨ç»“æœå±•ç¤º
âŒ ç³»ç»Ÿå…ƒç´ ç›®å½•
âŒ ABCåˆ†ç±»å¯è§†åŒ–

è‡´å‘½é—®é¢˜:
1. ç¡¬ç¼–ç URLï¼ˆç¬¬32-38è¡Œï¼‰:
   const response = await fetch(`http://localhost:8000/data/projects/${projectId}/processed/novel/intro.md`)
   ğŸ”´ é—®é¢˜: 
      - localhostç¡¬ç¼–ç ï¼ˆéƒ¨ç½²å¤±è´¥ï¼‰
      - ç›´æ¥è®¿é—®data/ç›®å½•ï¼ˆç»•è¿‡APIï¼‰
      - processed/ç›®å½•ä¸å­˜åœ¨ï¼ˆ404é”™è¯¯ï¼‰
   
2. æ‰‹åŠ¨è§£æMarkdownï¼ˆç¬¬40-52è¡Œï¼‰:
   const chapterRegex = /^# ç¬¬(\d+)ç« /gm
   ğŸ”´ é—®é¢˜:
      - åç«¯æœ‰chapters.jsonç»“æ„åŒ–æ•°æ®
      - å‰ç«¯å´ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£ææ–‡æœ¬
      - è¿åæ¶æ„è®¾è®¡åŸåˆ™
   
3. APIæ–¹æ³•æœªä½¿ç”¨:
   projectsApiV2.getNovelSegmentation()  // âŒ å®šä¹‰äº†ä½†æœªä½¿ç”¨
   projectsApiV2.getNovelAnnotation()    // âŒ å®šä¹‰äº†ä½†æœªä½¿ç”¨

è¯„åˆ†: 30/100 (ä¸¥é‡ä¸åˆæ ¼)
```

**ScriptViewerPageé¡µé¢**:
```
âœ… é›†æ•°å¯¼èˆª
âœ… MarkdownåŸæ–‡æ¸²æŸ“ï¼ˆå¸¦æ—¶é—´è½´ï¼‰
âŒ åˆ†æ®µç»“æœå±•ç¤º
âŒ Hookä¿¡æ¯å±•ç¤º
âŒ ABCåˆ†ç±»å¯è§†åŒ–

é—®é¢˜ä¸NovelViewerPageç±»ä¼¼
è¯„åˆ†: 35/100 (ä¸¥é‡ä¸åˆæ ¼)
```

#### 2.3 ä»£ç è´¨é‡æ£€æŸ¥

**åæ¨¡å¼ï¼ˆAnti-patternsï¼‰è¯†åˆ«**:

```typescript
// âŒ åæ¨¡å¼1: ç¡¬ç¼–ç URL
const response = await fetch(`http://localhost:8000/data/...`)

// âœ… æ­£ç¡®åšæ³•:
const response = await apiClient.get(`/api/v2/projects/${projectId}/chapters/${chapterId}/content`)

// âŒ åæ¨¡å¼2: æ‰‹åŠ¨è§£æç»“æ„åŒ–æ•°æ®
const chapterRegex = /^# ç¬¬(\d+)ç« /gm
const matches = [...fullContent.matchAll(chapterRegex)]

// âœ… æ­£ç¡®åšæ³•:
const { data: chapters } = await projectsApiV2.getChapters(projectId)

// âŒ åæ¨¡å¼3: ç»•è¿‡APIç›´æ¥è®¿é—®æ–‡ä»¶
fetch('/data/projects/...')

// âœ… æ­£ç¡®åšæ³•:
projectsApiV2.getChapterContent(projectId, chapterId)
```

**é”™è¯¯å¤„ç†ç¼ºå¤±**:
```typescript
// âŒ å½“å‰ä»£ç : æ— é”™è¯¯å¤„ç†
const response = await fetch(url)
return response.text()

// âœ… åº”è¯¥:
try {
  const response = await fetch(url)
  if (!response.ok) {
    throw new Error(`HTTP ${response.status}: ${response.statusText}`)
  }
  return response.text()
} catch (error) {
  logger.error('Failed to fetch content', error)
  toast.error('Failed to load content. Please try again.')
  return null
}
```

---

## Layer 3: APIå¥‘çº¦å±‚åˆ†æ

### ç›®æ ‡
æ£€æŸ¥APIè®¾è®¡æ˜¯å¦å®Œæ•´ã€æ˜¯å¦ç¬¦åˆRESTfulè§„èŒƒ

### 3.1 APIæ¸…å•ä¸å®Œæ•´æ€§æ£€æŸ¥

**å·²å®ç°çš„API** (projectsApiV2.ts):

```typescript
// ========== é¡¹ç›®ç®¡ç† (100%å®Œæ•´) ==========
âœ… GET  /api/v2/projects                    - è·å–é¡¹ç›®åˆ—è¡¨
âœ… GET  /api/v2/projects/stats              - è·å–é¡¹ç›®ç»Ÿè®¡
âœ… POST /api/v2/projects                    - åˆ›å»ºé¡¹ç›®
âœ… GET  /api/v2/projects/{id}               - è·å–é¡¹ç›®è¯¦æƒ…
âœ… GET  /api/v2/projects/{id}/meta          - è·å–é¡¹ç›®å®Œæ•´å…ƒæ•°æ®
âœ… PUT  /api/v2/projects/{id}               - æ›´æ–°é¡¹ç›®
âœ… DELETE /api/v2/projects/{id}             - åˆ é™¤é¡¹ç›®

// ========== æ–‡ä»¶ç®¡ç† (90%å®Œæ•´) ==========
âœ… POST   /api/v2/projects/{id}/upload       - ä¸Šä¼ æ–‡ä»¶
âœ… GET    /api/v2/projects/{id}/files        - è·å–åŸå§‹æ–‡ä»¶åˆ—è¡¨
âœ… GET    /api/v2/projects/{id}/files/{name}/view  - æŸ¥çœ‹æ–‡ä»¶å†…å®¹
âœ… DELETE /api/v2/projects/{id}/files/{name} - åˆ é™¤æ–‡ä»¶
âš ï¸ ç¼ºå°‘: GET /api/v2/projects/{id}/files/{name}/metadata - è·å–æ–‡ä»¶å…ƒæ•°æ®

// ========== é¢„å¤„ç† (80%å®Œæ•´) ==========
âœ… POST /api/v2/projects/{id}/preprocess         - è§¦å‘é¢„å¤„ç†
âœ… GET  /api/v2/projects/{id}/preprocess/status  - è·å–é¢„å¤„ç†çŠ¶æ€
âœ… POST /api/v2/projects/{id}/preprocess/cancel  - å–æ¶ˆé¢„å¤„ç†
âš ï¸ ç¼ºå°‘: POST /api/v2/projects/{id}/preprocess/retry - é‡è¯•é¢„å¤„ç†

// ========== ç« èŠ‚æŸ¥è¯¢ (40%å®Œæ•´) ==========
âœ… GET /api/v2/projects/{id}/chapters           - è·å–ç« èŠ‚åˆ—è¡¨
âŒ GET /api/v2/projects/{id}/chapters/{chId}    - è·å–ç« èŠ‚è¯¦æƒ…ï¼ˆåŸæ–‡ï¼‰
âŒ GET /api/v2/projects/{id}/chapters/{chId}/segmentation  - è·å–åˆ†æ®µç»“æœ
âŒ GET /api/v2/projects/{id}/chapters/{chId}/annotation    - è·å–æ ‡æ³¨ç»“æœ

// ========== é›†æ•°æŸ¥è¯¢ (40%å®Œæ•´) ==========
âœ… GET /api/v2/projects/{id}/episodes          - è·å–é›†æ•°åˆ—è¡¨
âš ï¸ GET /api/v2/projects/{id}/episodes/{epId}  - è·å–é›†æ•°è¯¦æƒ…ï¼ˆå·²å®šä¹‰ä½†æœªå®ç°ï¼‰
âŒ GET /api/v2/projects/{id}/episodes/{epId}/segmentation - è·å–åˆ†æ®µç»“æœ
âŒ GET /api/v2/projects/{id}/episodes/ep01/hook - è·å–Hookä¿¡æ¯

// ========== å·¥ä½œæµè§¦å‘ (0%å®Œæ•´) ==========
âŒ POST /api/v2/projects/{id}/workflows/novel/segmentation    - è§¦å‘å°è¯´åˆ†æ®µ
âŒ POST /api/v2/projects/{id}/workflows/novel/annotation      - è§¦å‘å°è¯´æ ‡æ³¨
âŒ POST /api/v2/projects/{id}/workflows/novel/system-detection - è§¦å‘ç³»ç»Ÿæ£€æµ‹
âŒ POST /api/v2/projects/{id}/workflows/script/segmentation   - è§¦å‘è„šæœ¬åˆ†æ®µ
âŒ POST /api/v2/projects/{id}/workflows/script/hook           - è§¦å‘Hookæ£€æµ‹

// ========== å¯¹é½æŸ¥è¯¢ (0%å®Œæ•´) ==========
âŒ GET /api/v2/projects/{id}/alignments                      - è·å–å¯¹é½å¯¹åˆ—è¡¨
âŒ GET /api/v2/projects/{id}/alignments/{chId}/{epId}        - è·å–å¯¹é½è¯¦æƒ…
âŒ POST /api/v2/projects/{id}/workflows/alignment            - è§¦å‘å¯¹é½

// ========== Analyst Results APIs (100%å®šä¹‰ï¼Œä½†åç«¯æœªå®ç°) ==========
âš ï¸ GET /api/v2/projects/{id}/analyst/script_analysis/{epId}/segmentation
âš ï¸ GET /api/v2/projects/{id}/analyst/script_analysis/{epId}/hook
âš ï¸ GET /api/v2/projects/{id}/analyst/novel_analysis/{chId}/segmentation
âš ï¸ GET /api/v2/projects/{id}/analyst/novel_analysis/{chId}/annotation
âš ï¸ GET /api/v2/projects/{id}/analyst/novel_analysis/system_catalog
âš ï¸ GET /api/v2/projects/{id}/analyst/alignment/{chId}/{epId}
```

**APIå®Œæ•´åº¦è¯„åˆ†**:
- é¡¹ç›®ç®¡ç†: 100% âœ…
- æ–‡ä»¶ç®¡ç†: 90% ğŸŸ¢
- é¢„å¤„ç†: 80% ğŸŸ¡
- å†…å®¹æŸ¥è¯¢: 30% ğŸ”´
- å·¥ä½œæµè§¦å‘: 0% ğŸ”´
- å¯¹é½åŠŸèƒ½: 0% ğŸ”´

**æ•´ä½“APIå®Œæ•´åº¦**: **50%** ğŸ”´

### 3.2 APIè®¾è®¡è§„èŒƒæ£€æŸ¥

**RESTfulè§„èŒƒéµå®ˆæƒ…å†µ**:

```
âœ… èµ„æºå‘½åä½¿ç”¨å¤æ•°ï¼ˆprojects, chapters, episodesï¼‰
âœ… ä½¿ç”¨HTTPåŠ¨è¯ï¼ˆGET/POST/PUT/DELETEï¼‰
âœ… å±‚çº§ç»“æ„æ¸…æ™°ï¼ˆ/projects/{id}/chapters/{chId}/...ï¼‰
âš ï¸ é”™è¯¯å“åº”æ ¼å¼ä¸ç»Ÿä¸€
âš ï¸ ç¼ºå°‘HATEOASé“¾æ¥
```

**å“åº”æ ¼å¼ä¸€è‡´æ€§**:

```typescript
// âœ… è‰¯å¥½çš„å“åº”æ ¼å¼
{
  "total_chapters": 50,
  "chapters": [
    { "id": "chapter_001", "title": "...", ... }
  ]
}

// âŒ ä¸ä¸€è‡´çš„å“åº”æ ¼å¼
{
  "message": "Success",  // æœ‰æ—¶æ˜¯message
  "data": {...}          // æœ‰æ—¶æ˜¯ç›´æ¥è¿”å›æ•°æ®
}

// âœ… å»ºè®®ç»Ÿä¸€æ ¼å¼
{
  "success": true,
  "data": {...},
  "meta": { "total": 50, "page": 1 },
  "error": null
}
```

---

## Layer 4: åç«¯å®ç°å±‚åˆ†æ

### ç›®æ ‡
æ£€æŸ¥åç«¯å·¥å…·æ˜¯å¦æ­£ç¡®å®ç°ï¼Œæ•°æ®æ˜¯å¦æ­£ç¡®ç”Ÿæˆ

### 4.1 PreprocessServiceé—®é¢˜è¯Šæ–­

**ç—‡çŠ¶**:
```
âœ… meta.jsonæ˜¾ç¤ºpreprocess: completed
âœ… åŸå§‹æ–‡ä»¶å­˜åœ¨ï¼ˆraw/novel/, raw/srt/ï¼‰
âŒ processed/ç›®å½•ä¸å­˜åœ¨
âŒ novel_chapters: 0, script_episodes: 0
```

**è¯Šæ–­æ­¥éª¤**:

1. **æ£€æŸ¥PreprocessServiceä»£ç é€»è¾‘**:
```python
# src/workflows/preprocess_service.py ç¬¬70-76è¡Œ
project_dir = os.path.join(config.data_dir, "projects", project_id)
raw_base = os.path.join(project_dir, "raw")
# ...

# é—®é¢˜1: æ˜¯å¦åˆ›å»ºäº†processed/ç›®å½•ï¼Ÿ
# é—®é¢˜2: å·¥å…·è¾“å‡ºè·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Ÿ
# é—®é¢˜3: æ˜¯å¦æœ‰å¼‚å¸¸è¢«åæ‰ï¼Ÿ
```

2. **æ£€æŸ¥å·¥å…·è¾“å‡ºè·¯å¾„**:
```python
# NovelImporteråº”è¯¥è¾“å‡ºåˆ°å“ªé‡Œï¼Ÿ
# NovelChapterDetectoråº”è¯¥è¾“å‡ºchapters.jsonåˆ°å“ªé‡Œï¼Ÿ
# æ˜¯å¦ä½¿ç”¨äº†ArtifactManagerï¼Ÿ
```

3. **æ£€æŸ¥é”™è¯¯å¤„ç†**:
```python
# æ˜¯å¦æœ‰try-exceptåæ‰äº†å¼‚å¸¸ï¼Ÿ
# æ˜¯å¦æœ‰é™é»˜å¤±è´¥çš„æƒ…å†µï¼Ÿ
```

### 4.2 å·¥å…·é“¾å®Œæ•´æ€§æ£€æŸ¥

**Novelå¤„ç†é“¾è¯Šæ–­**:

```python
# é¢„æœŸæµç¨‹:
NovelImporter 
  â†’ è¾“å…¥: raw/novel/xx.txt
  â†’ è¾“å‡º: processed/novel/standardized.txt
  â†“
NovelMetadataExtractor
  â†’ è¾“å…¥: processed/novel/standardized.txt
  â†’ è¾“å‡º: processed/novel/metadata.json
  â†“
NovelChapterDetector
  â†’ è¾“å…¥: processed/novel/standardized.txt
  â†’ è¾“å‡º: processed/novel/chapters.json
  â†“
NovelSegmenter (éœ€æ‰‹åŠ¨è§¦å‘)
  â†’ è¾“å…¥: processed/novel/standardized.txt + chapters.json
  â†’ è¾“å‡º: processed/novel/segmented/chapter_*.json

# æ£€æŸ¥æ¸…å•:
1. âœ… NovelImporteræ˜¯å¦æ­£ç¡®åˆ›å»ºprocessed/novel/ç›®å½•ï¼Ÿ
2. âœ… æ–‡ä»¶è·¯å¾„æ˜¯å¦ä½¿ç”¨äº†ç»å¯¹è·¯å¾„è¿˜æ˜¯ç›¸å¯¹è·¯å¾„ï¼Ÿ
3. âœ… æ˜¯å¦ä½¿ç”¨äº†ArtifactManagerä¿å­˜ç»“æœï¼Ÿ
4. âœ… é”™è¯¯æ˜¯å¦è¢«æ­£ç¡®æŠ›å‡ºï¼Ÿ
```

**Scriptå¤„ç†é“¾è¯Šæ–­**:

```python
# é¢„æœŸæµç¨‹:
SrtImporter
  â†’ è¾“å…¥: raw/srt/ep01.srt
  â†’ è¾“å‡º: processed/script/ep01-imported.srt (æˆ–.json)
  â†“
SrtTextExtractor
  â†’ è¾“å…¥: processed/script/ep01-imported.srt
  â†’ è¾“å‡º: processed/script/ep01-imported.md

# æ£€æŸ¥æ¸…å•:
1. âœ… SrtImporteræ˜¯å¦åˆ›å»ºprocessed/script/ç›®å½•ï¼Ÿ
2. âœ… è¾“å‡ºæ–‡ä»¶å‘½åè§„èŒƒæ˜¯å¦æ­£ç¡®ï¼Ÿ
3. âœ… LLMè°ƒç”¨æ˜¯å¦æˆåŠŸï¼Ÿ
```

### 4.3 æ•°æ®ç”ŸæˆéªŒè¯

**éªŒè¯æ–¹æ³•**:

```bash
# æ­¥éª¤1: æŸ¥çœ‹æ—¥å¿—
tail -f output/operation_history.jsonl

# æ­¥éª¤2: æ‰‹åŠ¨è¿è¡Œé¢„å¤„ç†
python scripts/test/test_novel_processing_workflow.py

# æ­¥éª¤3: æ£€æŸ¥è¾“å‡ºæ–‡ä»¶
ls -R data/projects/project_001/processed/

# æ­¥éª¤4: éªŒè¯æ•°æ®æ ¼å¼
cat data/projects/project_001/processed/novel/chapters.json | jq .
```

---

## Layer 5: æ•°æ®å­˜å‚¨å±‚åˆ†æ

### ç›®æ ‡
æ£€æŸ¥æ•°æ®æ–‡ä»¶ç»“æ„ã€æ ¼å¼ã€å®Œæ•´æ€§

### 5.1 ç›®å½•ç»“æ„è§„èŒƒæ£€æŸ¥

**æ ‡å‡†ç›®å½•ç»“æ„** (æ¥è‡ªæ–‡æ¡£):
```
data/projects/{project_id}/
â”œâ”€â”€ meta.json                          âœ… å­˜åœ¨
â”œâ”€â”€ raw/                               âœ… å­˜åœ¨
â”‚   â”œâ”€â”€ novel/                         âœ… å­˜åœ¨ï¼ˆ1ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ åºåˆ—å…¬è·¯æ±‚ç”Ÿ.txt          âœ… 356KB
â”‚   â””â”€â”€ srt/                           âœ… å­˜åœ¨ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰
â”‚       â”œâ”€â”€ ep01.srt                   âœ… 22KB
â”‚       â”œâ”€â”€ ep02.srt                   âœ… 9KB
â”‚       â”œâ”€â”€ ep03.srt                   âœ… 7KB
â”‚       â”œâ”€â”€ ep04.srt                   âœ… 5KB
â”‚       â””â”€â”€ ep05.srt                   âœ… 3KB
â”œâ”€â”€ processed/                         âŒ ä¸å­˜åœ¨ â† æ ¸å¿ƒé—®é¢˜
â”‚   â”œâ”€â”€ novel/                         âŒ åº”è¯¥æœ‰ä½†æ²¡æœ‰
â”‚   â”‚   â”œâ”€â”€ standardized.txt
â”‚   â”‚   â”œâ”€â”€ metadata.json
â”‚   â”‚   â”œâ”€â”€ chapters.json
â”‚   â”‚   â”œâ”€â”€ segmented/
â”‚   â”‚   â”‚   â””â”€â”€ chapter_*.json
â”‚   â”‚   â”œâ”€â”€ annotated/
â”‚   â”‚   â”‚   â””â”€â”€ chapter_*.json
â”‚   â”‚   â””â”€â”€ system_catalog.json
â”‚   â””â”€â”€ script/                        âŒ åº”è¯¥æœ‰ä½†æ²¡æœ‰
â”‚       â”œâ”€â”€ episodes.json
â”‚       â”œâ”€â”€ ep01-imported.md
â”‚       â”œâ”€â”€ ep02-imported.md
â”‚       â”œâ”€â”€ segmented/
â”‚       â”‚   â””â”€â”€ ep*.json
â”‚       â””â”€â”€ validation/
â”‚           â””â”€â”€ ep*.json
â”œâ”€â”€ alignment/                         âŒ ä¸å­˜åœ¨ï¼ˆæ­£å¸¸ï¼Œå°šæœªå¯¹é½ï¼‰
â””â”€â”€ reports/                           âŒ ä¸å­˜åœ¨ï¼ˆæ­£å¸¸ï¼Œå°šæœªç”ŸæˆæŠ¥å‘Šï¼‰
```

### 5.2 æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

**meta.jsonå­—æ®µéªŒè¯**:

```json
{
  "sources": {
    "novel_chapters": 0,      // âŒ åº”è¯¥æ˜¯50ï¼Œä½†æ˜¾ç¤º0
    "script_episodes": 0      // âŒ åº”è¯¥æ˜¯5ï¼Œä½†æ˜¾ç¤º0
  },
  "workflow_stages": {
    "preprocess": {
      "status": "completed",  // âš ï¸ çŠ¶æ€completedä½†æ— è¾“å‡º
      "tasks": [...]          // âœ… ä»»åŠ¡è®°å½•å®Œæ•´
    }
  }
}
```

**æ•°æ®ä¸€è‡´æ€§é—®é¢˜**:
1. ğŸ”´ é¢„å¤„ç†çŠ¶æ€completedï¼Œä½†processed/ç›®å½•ä¸å­˜åœ¨
2. ğŸ”´ ç« èŠ‚æ•°å’Œé›†æ•°æ˜¾ç¤º0ï¼Œä½†åŸå§‹æ–‡ä»¶å­˜åœ¨
3. âš ï¸ workflow_stagesä¸å®é™…æ•°æ®ä¸ä¸€è‡´

---

## ğŸ¯ ç»¼åˆè¯Šæ–­ç»“è®º

### é—®é¢˜æ ¹æºåˆ†æ

```
ç”¨æˆ·ç—›ç‚¹: ä¸Šä¼ æ–‡ä»¶åçœ‹ä¸åˆ°ä»»ä½•å¤„ç†ç»“æœ
    â†“
å‰ç«¯é—®é¢˜: NovelViewerPageç¡¬ç¼–ç URLï¼Œè®¿é—®ä¸å­˜åœ¨çš„processed/
    â†“
APIé—®é¢˜: ç¼ºå°‘æŸ¥è¯¢åˆ†æ®µ/æ ‡æ³¨ç»“æœçš„API
    â†“
åç«¯é—®é¢˜: PreprocessServiceæ‰§è¡Œäº†ä½†æœªç”Ÿæˆè¾“å‡ºæ–‡ä»¶
    â†“
æ ¸å¿ƒæ ¹æº: processed/ç›®å½•ä¸å­˜åœ¨
```

### æ•…éšœé“¾è·¯å›¾

```
PreprocessService.preprocess_project()
    â†“
æ‰§è¡ŒNovelImporter / NovelChapterDetector
    â†“
âŒ æœªåˆ›å»ºprocessed/ç›®å½•
âŒ æˆ–æœªä¿å­˜è¾“å‡ºæ–‡ä»¶
âŒ æˆ–ä¿å­˜åˆ°é”™è¯¯çš„ä½ç½®
    â†“
meta.jsonæ›´æ–°ä¸ºcompletedï¼ˆé”™è¯¯ï¼ï¼‰
    â†“
å‰ç«¯æŸ¥è¯¢chaptersæ•°æ®
    â†“
è¿”å›novel_chapters: 0
    â†“
å‰ç«¯æ— æ³•å±•ç¤ºä»»ä½•å†…å®¹
```

---

## ğŸ“‹ ä¿®å¤ä¼˜å…ˆçº§çŸ©é˜µ

| é—®é¢˜ | å½±å“å±‚çº§ | é˜»å¡ç¨‹åº¦ | ä¿®å¤éš¾åº¦ | ä¼˜å…ˆçº§ |
|------|---------|---------|---------|--------|
| processed/ç›®å½•ä¸å­˜åœ¨ | Layer 4-5 | ğŸ”´ å®Œå…¨é˜»å¡ | ä¸­ | **P0** |
| PreprocessServiceæœªç”Ÿæˆè¾“å‡º | Layer 4 | ğŸ”´ å®Œå…¨é˜»å¡ | ä¸­ | **P0** |
| meta.jsonæ•°æ®ä¸ä¸€è‡´ | Layer 5 | ğŸ”´ å®Œå…¨é˜»å¡ | ä½ | **P0** |
| æŸ¥è¯¢APIç¼ºå¤± | Layer 3 | ğŸ”´ é˜»å¡å±•ç¤º | ä½ | **P0** |
| NovelViewerPageç¡¬ç¼–ç  | Layer 2 | ğŸ”´ é˜»å¡ä½¿ç”¨ | ä¸­ | **P0** |
| å·¥ä½œæµè§¦å‘APIç¼ºå¤± | Layer 3 | ğŸŸ¡ å½±å“çµæ´»æ€§ | ä¸­ | **P1** |
| å¯¹é½åŠŸèƒ½æœªå®ç° | Layer 2-4 | ğŸŸ¡ åŠŸèƒ½ç¼ºå¤± | é«˜ | **P1** |

---

## ğŸ”§ ä¿®å¤è·¯çº¿å›¾

### Phase 0: ç´§æ€¥ä¿®å¤ (2å°æ—¶)
**ç›®æ ‡**: è®©ç”¨æˆ·èƒ½çœ‹åˆ°åŸºæœ¬çš„å¤„ç†ç»“æœ

```
1. è¯Šæ–­PreprocessServiceé—®é¢˜ (30åˆ†é’Ÿ)
   - æ·»åŠ è¯¦ç»†æ—¥å¿—
   - è¿è¡Œtest_novel_processing_workflow.py
   - ç¡®è®¤processed/ç›®å½•åˆ›å»ºé€»è¾‘
   
2. ä¿®å¤PreprocessService (1å°æ—¶)
   - ç¡®ä¿åˆ›å»ºprocessed/ç›®å½•
   - ç¡®ä¿å·¥å…·æ­£ç¡®ä¿å­˜è¾“å‡º
   - éªŒè¯ç« èŠ‚æ£€æµ‹åŠŸèƒ½
   
3. éªŒè¯æ•°æ®ç”Ÿæˆ (30åˆ†é’Ÿ)
   - é‡æ–°è¿è¡Œé¢„å¤„ç†
   - ç¡®è®¤processed/ç›®å½•å’Œæ–‡ä»¶å­˜åœ¨
   - ç¡®è®¤meta.jsonæ•°æ®æ­£ç¡®
```

### Phase 1: è¡¥å……æŸ¥è¯¢API (4å°æ—¶)
**ç›®æ ‡**: å‰ç«¯èƒ½æŸ¥è¯¢åˆ°åˆ†æ®µ/æ ‡æ³¨ç»“æœ

```
1. å®ç°ç« èŠ‚æŸ¥è¯¢API (2å°æ—¶)
   GET /api/v2/projects/{id}/chapters/{chId}
   GET /api/v2/projects/{id}/chapters/{chId}/segmentation
   GET /api/v2/projects/{id}/chapters/{chId}/annotation
   
2. å®ç°é›†æ•°æŸ¥è¯¢API (2å°æ—¶)
   GET /api/v2/projects/{id}/episodes/{epId}
   GET /api/v2/projects/{id}/episodes/{epId}/segmentation
   GET /api/v2/projects/{id}/episodes/ep01/hook
```

### Phase 2: é‡æ„Vieweré¡µé¢ (8å°æ—¶)
**ç›®æ ‡**: ç”¨æˆ·èƒ½æŸ¥çœ‹åˆ†æ®µ/æ ‡æ³¨ç»“æœ

```
1. NovelViewerPageé‡æ„ (4å°æ—¶)
   - ç§»é™¤ç¡¬ç¼–ç URL
   - ä½¿ç”¨APIæ–¹æ³•æŸ¥è¯¢æ•°æ®
   - å®ç°è§†å›¾æ¨¡å¼åˆ‡æ¢
   - åˆ†æ®µç»“æœå¯è§†åŒ–
   
2. ScriptViewerPageé‡æ„ (4å°æ—¶)
   - ç§»é™¤ç¡¬ç¼–ç URL
   - ä½¿ç”¨APIæ–¹æ³•æŸ¥è¯¢æ•°æ®
   - åˆ†æ®µç»“æœå¯è§†åŒ–
   - Hookä¿¡æ¯å±•ç¤º
```

### Phase 3: å·¥ä½œæµæ§åˆ¶åŠŸèƒ½ (10å°æ—¶)
**ç›®æ ‡**: ç”¨æˆ·èƒ½çµæ´»æ§åˆ¶å¤„ç†æµç¨‹

```
1. å·¥ä½œæµè§¦å‘API (6å°æ—¶)
   - é‡æ„NovelProcessingWorkflowæ”¯æŒåˆ†æ­¥éª¤
   - å®ç°APIç«¯ç‚¹
   - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
   
2. WorkflowControlPage (4å°æ—¶)
   - åˆ›å»ºé¡µé¢
   - å·¥ä½œæµæ­¥éª¤å¡ç‰‡
   - è¿›åº¦å±•ç¤º
   - æ—¥å¿—æŸ¥çœ‹
```

### Phase 4: å¯¹é½åŠŸèƒ½ (12å°æ—¶)
**ç›®æ ‡**: ç”¨æˆ·èƒ½æŸ¥çœ‹å¯¹é½ç»“æœ

```
1. å¯¹é½API (4å°æ—¶)
   - å®ç°æŸ¥è¯¢ç«¯ç‚¹
   - å®ç°è§¦å‘ç«¯ç‚¹
   
2. AlignmentViewerPage (8å°æ—¶)
   - åˆ›å»ºé¡µé¢
   - Sankeyå›¾å¯è§†åŒ–
   - å¯¹é½è¯¦æƒ…å±•ç¤º
```

---

## ğŸ“Š Reviewè¯„åˆ†ä½“ç³»

### è¯„åˆ†ç»´åº¦

| ç»´åº¦ | æƒé‡ | è¯„åˆ†æ ‡å‡† |
|------|------|---------|
| **åŠŸèƒ½å®Œæ•´æ€§** | 30% | åŠŸèƒ½å®ç°ç¨‹åº¦ |
| **ç”¨æˆ·ä½“éªŒ** | 25% | æµç•…åº¦ã€ç›´è§‚æ€§ |
| **ä»£ç è´¨é‡** | 20% | è§„èŒƒæ€§ã€å¯ç»´æŠ¤æ€§ |
| **æ•°æ®å‡†ç¡®æ€§** | 15% | æ•°æ®ç”Ÿæˆæ­£ç¡®æ€§ |
| **é”™è¯¯å¤„ç†** | 10% | å¼‚å¸¸å¤„ç†å®Œå–„åº¦ |

### å½“å‰è¯„åˆ†

```
é¡¹ç›®æ•´ä½“è¯„åˆ†: 35/100 ğŸ”´ (ä¸¥é‡ä¸åˆæ ¼)

åˆ†é¡¹è¯„åˆ†:
- åŠŸèƒ½å®Œæ•´æ€§: 20/30  (66% åŠŸèƒ½ç¼ºå¤±)
- ç”¨æˆ·ä½“éªŒ:   8/25   (å‡ ä¹ä¸å¯ç”¨)
- ä»£ç è´¨é‡:   12/20  (ç¡¬ç¼–ç ã€æ— é”™è¯¯å¤„ç†)
- æ•°æ®å‡†ç¡®æ€§: 0/15   (processed/ç›®å½•ä¸å­˜åœ¨)
- é”™è¯¯å¤„ç†:   5/10   (é”™è¯¯æç¤ºä¸æ˜ç¡®)
```

### ç›®æ ‡è¯„åˆ†

```
Phase 0å®Œæˆå: 50/100  (åŸºæœ¬å¯ç”¨)
Phase 1å®Œæˆå: 65/100  (æ•°æ®å¯æŸ¥è¯¢)
Phase 2å®Œæˆå: 80/100  (ä½“éªŒè‰¯å¥½)
Phase 3å®Œæˆå: 90/100  (åŠŸèƒ½å®Œæ•´)
Phase 4å®Œæˆå: 95/100  (ä¼˜ç§€)
```

---

## ğŸ” Reviewæ‰§è¡Œæ¨¡æ¿

### é’ˆå¯¹æ¯ä¸ªå·¥ä½œæµé˜¶æ®µ

```markdown
## å·¥ä½œæµé˜¶æ®µ: [é˜¶æ®µåç§°]

### Layer 1: ç”¨æˆ·éœ€æ±‚
- ç”¨æˆ·ç›®æ ‡: [æè¿°ç”¨æˆ·æƒ³åšä»€ä¹ˆ]
- é¢„æœŸä½“éªŒ: [æè¿°ç”¨æˆ·æœŸæœ›çœ‹åˆ°ä»€ä¹ˆ]
- æˆåŠŸæ ‡å‡†: [é‡åŒ–çš„æˆåŠŸæŒ‡æ ‡]

### Layer 2: å‰ç«¯äº¤äº’
- é¡µé¢: [ç›¸å…³é¡µé¢åç§°]
- äº¤äº’å…ƒç´ : [æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰]
- å®ç°çŠ¶æ€: [âœ… å·²å®ç° / âš ï¸ éƒ¨åˆ†å®ç° / âŒ æœªå®ç°]
- é—®é¢˜æ¸…å•: [å…·ä½“é—®é¢˜åˆ—è¡¨]

### Layer 3: APIå¥‘çº¦
- APIç«¯ç‚¹: [åˆ—å‡ºç›¸å…³API]
- è¯·æ±‚/å“åº”æ ¼å¼: [æ•°æ®ç»“æ„]
- å®ç°çŠ¶æ€: [âœ… å·²å®ç° / âŒ æœªå®ç°]
- é—®é¢˜æ¸…å•: [å…·ä½“é—®é¢˜åˆ—è¡¨]

### Layer 4: åç«¯å®ç°
- ç›¸å…³å·¥å…·: [åˆ—å‡ºä½¿ç”¨çš„å·¥å…·]
- å·¥ä½œæµ: [æè¿°å¤„ç†æµç¨‹]
- å®ç°çŠ¶æ€: [âœ… æ­£å¸¸ / âš ï¸ æœ‰é—®é¢˜ / âŒ æœªå®ç°]
- é—®é¢˜æ¸…å•: [å…·ä½“é—®é¢˜åˆ—è¡¨]

### Layer 5: æ•°æ®å­˜å‚¨
- è¾“å…¥æ•°æ®: [æ•°æ®æ–‡ä»¶è·¯å¾„]
- è¾“å‡ºæ•°æ®: [æ•°æ®æ–‡ä»¶è·¯å¾„]
- æ•°æ®æ ¼å¼: [Schemaå®šä¹‰]
- éªŒè¯ç»“æœ: [âœ… å­˜åœ¨ä¸”æ­£ç¡® / âš ï¸ å­˜åœ¨ä½†æœ‰é—®é¢˜ / âŒ ä¸å­˜åœ¨]
- é—®é¢˜æ¸…å•: [å…·ä½“é—®é¢˜åˆ—è¡¨]

### ç»¼åˆè¯„ä¼°
- è¯„åˆ†: [X/100]
- çŠ¶æ€: [âœ… ä¼˜ç§€ / ğŸŸ¢ è‰¯å¥½ / ğŸŸ¡ åŠæ ¼ / ğŸ”´ ä¸åˆæ ¼]
- é˜»å¡é—®é¢˜: [åˆ—å‡ºå…³é”®é˜»å¡]
- ä¿®å¤å»ºè®®: [å…·ä½“ä¿®å¤æ–¹æ¡ˆ]
```

---

## ğŸ“š é™„å½•: å¸¸ç”¨è¯Šæ–­å‘½ä»¤

### æ£€æŸ¥æ•°æ®æ–‡ä»¶
```bash
# æŸ¥çœ‹é¡¹ç›®ç›®å½•ç»“æ„
tree data/projects/project_001 -L 3

# æŸ¥çœ‹processedç›®å½•
ls -laR data/projects/project_001/processed/

# æŸ¥çœ‹meta.json
cat data/projects/project_001/meta.json | jq .

# æ£€æŸ¥ç« èŠ‚æ•°æ®
cat data/projects/project_001/processed/novel/chapters.json | jq '.[] | {id, title}'
```

### æ£€æŸ¥æ—¥å¿—
```bash
# æŸ¥çœ‹æ“ä½œå†å²
tail -100 output/operation_history.jsonl

# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f logs/backend.log

# æŸ¥çœ‹é¢„å¤„ç†æ—¥å¿—
grep "preprocess" output/operation_history.jsonl
```

### æ‰‹åŠ¨æµ‹è¯•
```bash
# æµ‹è¯•å°è¯´å¤„ç†
python scripts/test/test_novel_processing_workflow.py

# æµ‹è¯•è„šæœ¬å¤„ç†
python scripts/test/test_script_processing_workflow.py

# æµ‹è¯•é¢„å¤„ç†æœåŠ¡
python scripts/test/test_auto_preprocess.py
```

---

**æœ€åæ›´æ–°**: 2026-02-12  
**ä¸‹æ¬¡Review**: Phase 0ä¿®å¤å®Œæˆå  
**ç»´æŠ¤è€…**: Development Team
