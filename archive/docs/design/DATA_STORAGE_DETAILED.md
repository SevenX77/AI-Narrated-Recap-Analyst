# æ•°æ®å­˜å‚¨è¯¦ç»†è¯´æ˜

**æœ€åæ›´æ–°**: 2026-02-12  
**ç›®çš„**: è¯¦ç»†è¯´æ˜æ•°æ®å­˜å‚¨çš„å±‚æ¬¡ã€èŒè´£å’Œç‰ˆæœ¬ç®¡ç†ç­–ç•¥

---

## ğŸ“Š å½“å‰ç›®å½•ç»“æ„

```
data/projects/{project_id}/
â”œâ”€â”€ meta.json                    # é¡¹ç›®å…ƒæ•°æ®ï¼ˆçŠ¶æ€ã€æºæ–‡ä»¶ä¿¡æ¯ï¼‰
â”‚
â”œâ”€â”€ raw/                         # ğŸ”µ åŸå§‹æ–‡ä»¶ï¼ˆç”¨æˆ·ä¸Šä¼ ï¼Œä¸å¯å˜ï¼‰
â”‚   â”œâ”€â”€ novel/
â”‚   â”‚   â””â”€â”€ åºåˆ—å…¬è·¯æ±‚ç”Ÿ.txt     # å°è¯´åŸæ–‡
â”‚   â””â”€â”€ srt/
â”‚       â”œâ”€â”€ ep01.srt             # SRTå­—å¹•æ–‡ä»¶
â”‚       â”œâ”€â”€ ep02.srt
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ processed/                   # ğŸŸ¢ é¢„å¤„ç†ç»“æœï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼ŒåŸºç¡€æå–ï¼‰
â”‚   â”œâ”€â”€ novel/
â”‚   â”‚   â”œâ”€â”€ standardized.txt     # è§„èŒƒåŒ–åçš„å°è¯´æ–‡æœ¬
â”‚   â”‚   â”œâ”€â”€ metadata.json        # å…ƒæ•°æ®ï¼ˆä½œè€…ã€å­—æ•°ã€ç« èŠ‚æ•°ï¼‰
â”‚   â”‚   â””â”€â”€ chapters.json        # ç« èŠ‚åˆ—è¡¨ï¼ˆIDã€æ ‡é¢˜ã€èŒƒå›´ï¼‰
â”‚   â””â”€â”€ script/
â”‚       â”œâ”€â”€ ep01.json            # SRTè§£æç»“æœï¼ˆæ—¶é—´è½´ã€æ–‡æœ¬ï¼‰
â”‚       â”œâ”€â”€ ep01-imported.md     # æå–çš„çº¯æ–‡æœ¬ï¼ˆå¸¦LLMä¿®å¤ï¼‰
â”‚       â”œâ”€â”€ ep02.json
â”‚       â”œâ”€â”€ ep02-imported.md
â”‚       â””â”€â”€ episodes.json        # é›†æ•°åˆ—è¡¨
â”‚
â”œâ”€â”€ analysis/                    # ğŸŸ¡ åˆ†æç»“æœï¼ˆWorkflowè¾“å‡ºï¼Œç‰ˆæœ¬åŒ–ï¼‰
â”‚   â”œâ”€â”€ novel/
â”‚   â”‚   â”œâ”€â”€ chapter_001_segmentation_latest.json
â”‚   â”‚   â”œâ”€â”€ chapter_001_annotation_latest.json
â”‚   â”‚   â”œâ”€â”€ chapter_002_segmentation_latest.json
â”‚   â”‚   â”œâ”€â”€ system_catalog_latest.json
â”‚   â”‚   â””â”€â”€ history/             # å†å²ç‰ˆæœ¬
â”‚   â”‚       â”œâ”€â”€ chapter_001_segmentation_v20260212_180000.json
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”œâ”€â”€ script/
â”‚   â”‚   â”œâ”€â”€ ep01_segmentation_latest.json
â”‚   â”‚   â”œâ”€â”€ ep01_hook_latest.json
â”‚   â”‚   â”œâ”€â”€ ep02_segmentation_latest.json
â”‚   â”‚   â””â”€â”€ history/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ alignment/
â”‚       â”œâ”€â”€ chapter_001_ep01_alignment_latest.json
â”‚       â””â”€â”€ history/
â”‚           â””â”€â”€ ...
â”‚
â””â”€â”€ reports/                     # ğŸ“ æŠ¥å‘Šï¼ˆHTMLã€Markdownã€PDFï¼‰
    â”œâ”€â”€ quality_report.html
    â”œâ”€â”€ alignment_report.md
    â””â”€â”€ ...
```

---

## ğŸ¯ ç›®å½•èŒè´£è¯¦è§£

### 1. `raw/` - åŸå§‹æ–‡ä»¶å±‚

**èŒè´£**ï¼š
- å­˜å‚¨ç”¨æˆ·ä¸Šä¼ çš„åŸå§‹æ–‡ä»¶
- **æ°¸ä¸ä¿®æ”¹**ï¼šä¿æŒæ–‡ä»¶åŸå§‹çŠ¶æ€

**å†…å®¹**ï¼š
- `novel/`: å°è¯´åŸæ–‡ï¼ˆ.txt, .epubç­‰ï¼‰
- `srt/`: SRTå­—å¹•æ–‡ä»¶ï¼ˆ.srtï¼‰

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸å¯å˜ï¼ˆimmutableï¼‰
- âœ… ç”¨æˆ·å¯éšæ—¶é‡æ–°å¯¼å…¥
- âœ… ä½œä¸ºæ‰€æœ‰å¤„ç†çš„æºå¤´

**æ–‡ä»¶å‘½å**ï¼š
```
raw/
â”œâ”€â”€ novel/
â”‚   â””â”€â”€ {åŸå§‹æ–‡ä»¶å}.txt        # ä¿æŒç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶å
â””â”€â”€ srt/
    â”œâ”€â”€ ep01.srt               # ç»Ÿä¸€æ ¼å¼ï¼šep{XX}.srt
    â”œâ”€â”€ ep02.srt
    â””â”€â”€ ...
```

---

### 2. `processed/` - é¢„å¤„ç†å±‚

**èŒè´£**ï¼š
- è‡ªåŠ¨é¢„å¤„ç†ï¼ˆPreprocessServiceï¼‰çš„è¾“å‡º
- åŸºç¡€æå–ï¼šå¯¼å…¥ã€è§„èŒƒåŒ–ã€å…ƒæ•°æ®ã€åŸºç¡€è§£æ
- **ä¸åŒ…å«æ·±åº¦åˆ†æ**ï¼ˆåˆ†æ®µã€æ ‡æ³¨ç­‰ï¼‰

**å¤„ç†æµç¨‹**ï¼š
```
ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ â†’ PreprocessService â†’ processed/
    â”œâ”€ Novel: å¯¼å…¥ â†’ ç¼–ç æ£€æµ‹ â†’ ç« èŠ‚æ£€æµ‹ â†’ å…ƒæ•°æ®æå–
    â””â”€ Script: å¯¼å…¥ â†’ SRTè§£æ â†’ æ–‡æœ¬æå–ï¼ˆLLMä¿®å¤ï¼‰
```

**å†…å®¹**ï¼š

#### `processed/novel/`
```
novel/
â”œâ”€â”€ standardized.txt         # è§„èŒƒåŒ–åçš„å°è¯´ï¼ˆUTF-8ç¼–ç ï¼‰
â”œâ”€â”€ metadata.json            # å…ƒæ•°æ®
â”‚   {
â”‚     "title": "åºåˆ—å…¬è·¯æ±‚ç”Ÿ",
â”‚     "author": "æœ«å“¥è¶…å‡¡",
â”‚     "total_chars": 500000,
â”‚     "chapter_count": 50,
â”‚     "encoding": "UTF-8"
â”‚   }
â””â”€â”€ chapters.json            # ç« èŠ‚åˆ—è¡¨
    [
      {
        "id": "chapter_001",
        "title": "ç¬¬ä¸€ç«  æœ«æ—¥é™ä¸´",
        "start_line": 1,
        "end_line": 150
      },
      ...
    ]
```

#### `processed/script/`
```
script/
â”œâ”€â”€ ep01.json                # SRTè§£æç»“æœ
â”‚   {
â”‚     "episode_id": "ep01",
â”‚     "total_entries": 146,
â”‚     "total_duration": 180.5,
â”‚     "entries": [
â”‚       {
â”‚         "index": 1,
â”‚         "start_time": "00:00:00,000",
â”‚         "end_time": "00:00:02,500",
â”‚         "text": "æœ«æ—¥é™ä¸´ï¼Œå…¬è·¯æ±‚ç”Ÿ"
â”‚       },
â”‚       ...
â”‚     ]
â”‚   }
â”‚
â”œâ”€â”€ ep01-imported.md         # æå–çš„çº¯æ–‡æœ¬ï¼ˆå¸¦æ ‡ç‚¹ä¿®å¤ï¼‰
â”‚   æœ«æ—¥é™ä¸´ï¼Œå…¬è·¯æ±‚ç”Ÿã€‚
â”‚   è‹çƒˆç‹¬è‡ªé©¾é©¶ç€ä¸€è¾†ç ´æ—§çš„å¡è½¦...
â”‚
â”œâ”€â”€ ep02.json
â”œâ”€â”€ ep02-imported.md
â”‚
â””â”€â”€ episodes.json            # é›†æ•°åˆ—è¡¨
    [
      {
        "episode_id": "ep01",
        "name": "ç¬¬ä¸€é›†",
        "srt_entries": 146,
        "duration": 180.5,
        "status": "imported"
      },
      ...
    ]
```

**ç‰¹ç‚¹**ï¼š
- âœ… å¿«é€Ÿç”Ÿæˆï¼ˆ1-5åˆ†é’Ÿï¼‰
- âœ… æ— éœ€LLMæˆ–è½»é‡LLMï¼ˆä»…æ ‡ç‚¹ä¿®å¤ï¼‰
- âœ… å¯é‡å¤æ‰§è¡Œï¼ˆå¹‚ç­‰ï¼‰
- âœ… ä¸ºåç»­åˆ†ææä¾›è¾“å…¥

---

### 3. `analysis/` - æ·±åº¦åˆ†æå±‚

**èŒè´£**ï¼š
- Workflowçš„è¾“å‡ºç»“æœ
- æ·±åº¦åˆ†æï¼šåˆ†æ®µã€æ ‡æ³¨ã€ç³»ç»Ÿæ£€æµ‹ã€å¯¹é½
- **ç‰ˆæœ¬åŒ–ç®¡ç†**ï¼šä¿ç•™å†å²ç‰ˆæœ¬

**ç‰ˆæœ¬ç®¡ç†ç­–ç•¥**ï¼š

#### ArtifactManager å­˜å‚¨é€»è¾‘
```python
# ä¿å­˜æ—¶çš„è¡Œä¸º
save_artifact(content, artifact_type="chapter_001_segmentation", ...)

â†’ ç”Ÿæˆæ—¶é—´æˆ³: 20260212_180530

â†’ å†™å…¥æ–‡ä»¶:
   â”œâ”€ analysis/novel/chapter_001_segmentation_latest.json       # æœ€æ–°ç‰ˆæœ¬ï¼ˆæŒ‡é’ˆï¼‰
   â””â”€ analysis/novel/history/chapter_001_segmentation_v20260212_180530.json  # ç‰ˆæœ¬å­˜æ¡£
```

**ç›®å½•ç»“æ„**ï¼š
```
analysis/
â”œâ”€â”€ novel/
â”‚   â”œâ”€â”€ chapter_001_segmentation_latest.json      # â­ æœ€æ–°åˆ†æ®µç»“æœ
â”‚   â”œâ”€â”€ chapter_001_annotation_latest.json        # â­ æœ€æ–°æ ‡æ³¨ç»“æœ
â”‚   â”œâ”€â”€ chapter_002_segmentation_latest.json
â”‚   â”œâ”€â”€ system_catalog_latest.json                # â­ ç³»ç»Ÿå…ƒç´ ç›®å½•
â”‚   â”‚
â”‚   â””â”€â”€ history/                                  # ğŸ“¦ å†å²ç‰ˆæœ¬
â”‚       â”œâ”€â”€ chapter_001_segmentation_v20260212_180530.json
â”‚       â”œâ”€â”€ chapter_001_segmentation_v20260212_190000.json
â”‚       â”œâ”€â”€ chapter_001_annotation_v20260212_180600.json
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ script/
â”‚   â”œâ”€â”€ ep01_segmentation_latest.json             # â­ æœ€æ–°åˆ†æ®µç»“æœ
â”‚   â”œâ”€â”€ ep01_hook_latest.json                     # â­ Hookæ£€æµ‹ç»“æœ
â”‚   â”œâ”€â”€ ep02_segmentation_latest.json
â”‚   â”‚
â”‚   â””â”€â”€ history/
â”‚       â”œâ”€â”€ ep01_segmentation_v20260212_180000.json
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ alignment/
    â”œâ”€â”€ chapter_001_ep01_alignment_latest.json    # â­ å¯¹é½ç»“æœ
    â”‚
    â””â”€â”€ history/
        â””â”€â”€ ...
```

**æ–‡ä»¶å†…å®¹ç¤ºä¾‹**ï¼š

#### `chapter_001_segmentation_latest.json` (Novelåˆ†æ®µç»“æœ)
```json
{
  "chapter_id": "chapter_001",
  "chapter_title": "ç¬¬ä¸€ç«  æœ«æ—¥é™ä¸´",
  "total_paragraphs": 50,
  "paragraphs": [
    {
      "paragraph_id": "p001",
      "content": "æœ«æ—¥é™ä¸´çš„é‚£ä¸€å¤©ï¼Œè‹çƒˆæ­£é©¾é©¶ç€å¡è½¦è¡Œé©¶åœ¨é«˜é€Ÿå…¬è·¯ä¸Šã€‚",
      "category": "narrative",
      "start_line": 1,
      "end_line": 1
    },
    {
      "paragraph_id": "p002",
      "content": "ã€ç³»ç»Ÿæç¤ºã€‘åºåˆ—å…¬è·¯ç³»ç»Ÿæ¿€æ´»ï¼Œç©å®¶è‹çƒˆè¿›å…¥æœ«æ—¥æ±‚ç”Ÿæ¨¡å¼ã€‚",
      "category": "system",
      "start_line": 2,
      "end_line": 2
    },
    ...
  ],
  "metadata": {
    "segmented_at": "2026-02-12T18:05:30",
    "tool": "NovelSegmenter",
    "version": "v2.0",
    "llm_provider": "claude",
    "total_cost": 0.15
  }
}
```

#### `ep01_segmentation_latest.json` (Scriptåˆ†æ®µç»“æœ)
```json
{
  "episode_id": "ep01",
  "total_segments": 12,
  "segments": [
    {
      "segment_id": "seg001",
      "content": "æœ«æ—¥é™ä¸´ï¼Œå…¬è·¯æ±‚ç”Ÿã€‚",
      "category": "A",  // A=è®¾å®š, B=äº‹ä»¶, C=ç³»ç»Ÿ
      "start_time": 0.0,
      "end_time": 2.5,
      "srt_range": [1, 1]
    },
    {
      "segment_id": "seg002",
      "content": "è‹çƒˆç‹¬è‡ªé©¾é©¶ç€ä¸€è¾†ç ´æ—§çš„å¡è½¦ï¼Œè¡Œé©¶åœ¨è’å‡‰çš„é«˜é€Ÿå…¬è·¯ä¸Šã€‚",
      "category": "B",
      "start_time": 2.5,
      "end_time": 6.8,
      "srt_range": [2, 3]
    },
    ...
  ],
  "metadata": {
    "segmented_at": "2026-02-12T18:00:00",
    "tool": "ScriptSegmenter",
    "llm_provider": "deepseek",
    "total_cost": 0.08
  }
}
```

#### `ep01_hook_latest.json` (Hookæ£€æµ‹ç»“æœ)
```json
{
  "episode_id": "ep01",
  "has_hook": true,
  "hook_end_time": 45.6,
  "body_start_index": 15,
  "confidence": 0.92,
  "hook_content": "æœ«æ—¥é™ä¸´ï¼Œå…¬è·¯æ±‚ç”Ÿã€‚åœ¨è¿™ä¸ªå……æ»¡å±é™©çš„ä¸–ç•Œé‡Œ...",
  "analysis": {
    "is_independent": true,
    "is_summary": true,
    "matches_novel_intro": true,
    "similarity_score": 0.85
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… ç‰ˆæœ¬åŒ–ï¼šæ¯æ¬¡æ‰§è¡Œç”Ÿæˆæ–°ç‰ˆæœ¬
- âœ… æœ€æ–°æŒ‡é’ˆï¼š`_latest.json` å§‹ç»ˆæŒ‡å‘æœ€æ–°ç‰ˆæœ¬
- âœ… å†å²è¿½æº¯ï¼šå¯å›æ»šåˆ°ä»»æ„å†å²ç‰ˆæœ¬
- âœ… å¢é‡å­˜å‚¨ï¼šåªæœ‰å˜åŒ–æ—¶æ‰ç”Ÿæˆæ–°ç‰ˆæœ¬

---

### 4. `reports/` - æŠ¥å‘Šå±‚

**èŒè´£**ï¼š
- å¯è¯»æ€§æŠ¥å‘Šï¼ˆäººç±»é˜…è¯»ï¼‰
- æ ¼å¼ï¼šHTMLã€Markdownã€PDF

**å†…å®¹**ï¼š
```
reports/
â”œâ”€â”€ quality_report.html              # è´¨é‡è¯„åˆ†æŠ¥å‘Š
â”œâ”€â”€ novel_segmentation_report.md    # Novelåˆ†æ®µæŠ¥å‘Š
â”œâ”€â”€ script_segmentation_report.md   # Scriptåˆ†æ®µæŠ¥å‘Š
â”œâ”€â”€ alignment_report.html            # å¯¹é½åˆ†ææŠ¥å‘Š
â””â”€â”€ system_catalog_report.md         # ç³»ç»Ÿå…ƒç´ ç›®å½•æŠ¥å‘Š
```

**ç‰¹ç‚¹**ï¼š
- âœ… äººç±»å¯è¯»
- âœ… å¯è§†åŒ–å›¾è¡¨
- âœ… åŒ…å«å»ºè®®å’Œåˆ†æ

---

## ğŸ”„ æ•°æ®æµå‘è¯¦è§£

### å®Œæ•´æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·ä¸Šä¼  (Frontend)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ raw/                                                             â”‚
â”‚  â”œâ”€ novel/åºåˆ—å…¬è·¯æ±‚ç”Ÿ.txt                                       â”‚
â”‚  â””â”€ srt/ep01.srt, ep02.srt, ...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PreprocessService (è‡ªåŠ¨è§¦å‘)   â”‚
        â”‚  - Novel: å¯¼å…¥â†’ç« èŠ‚æ£€æµ‹â†’å…ƒæ•°æ®  â”‚
        â”‚  - Script: å¯¼å…¥â†’SRTè§£æâ†’æ–‡æœ¬æå–â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ processed/                                                       â”‚
â”‚  â”œâ”€ novel/                                                       â”‚
â”‚  â”‚   â”œâ”€ standardized.txt                                        â”‚
â”‚  â”‚   â”œâ”€ metadata.json                                           â”‚
â”‚  â”‚   â””â”€ chapters.json                                           â”‚
â”‚  â””â”€ script/                                                      â”‚
â”‚      â”œâ”€ ep01.json, ep01-imported.md                            â”‚
â”‚      â””â”€ episodes.json                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ç”¨æˆ·ç‚¹å‡» "Start Analysis"      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ NovelProcessingWorkflow       â”‚
        â”‚  - åˆ†æ®µ (Two-Pass)            â”‚
        â”‚  - æ ‡æ³¨ (Three-Pass)          â”‚
        â”‚  - ç³»ç»Ÿåˆ†æ                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ analysis/novel/                                                  â”‚
â”‚  â”œâ”€ chapter_001_segmentation_latest.json                        â”‚
â”‚  â”œâ”€ chapter_001_annotation_latest.json                          â”‚
â”‚  â”œâ”€ system_catalog_latest.json                                  â”‚
â”‚  â””â”€ history/ (ç‰ˆæœ¬å­˜æ¡£)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹¶è¡Œå¤„ç†æµ

```
Step 1: Import (è‡ªåŠ¨)
    â”œâ”€ Novel â†’ processed/novel/
    â””â”€ Script â†’ processed/script/
             â†“
Step 2 & 3: å¯å¹¶è¡Œæ‰§è¡Œ
    â”œâ”€ ScriptProcessingWorkflow â†’ analysis/script/
    â””â”€ NovelProcessingWorkflow â†’ analysis/novel/
             â†“
Step 4: Alignment (ä¸²è¡Œ)
    â””â”€ AlignmentWorkflow â†’ analysis/alignment/
```

---

## ğŸ“¦ ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

### ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬åŒ–ï¼Ÿ

1. **å¯å›æ»š**ï¼šåˆ†æç»“æœä¸æ»¡æ„æ—¶å›æ»šåˆ°å†å²ç‰ˆæœ¬
2. **A/Bå¯¹æ¯”**ï¼šå¯¹æ¯”ä¸åŒå‚æ•°çš„ç»“æœ
3. **å¢é‡ä¼˜åŒ–**ï¼šé€æ­¥æ”¹è¿›è€Œä¸ä¸¢å¤±å†å²æ•°æ®
4. **è°ƒè¯•è¿½æº¯**ï¼šå‡ºé—®é¢˜æ—¶å¯ä»¥è¿½æº¯åˆ°å…·ä½“ç‰ˆæœ¬

### ç‰ˆæœ¬å‘½åè§„åˆ™

```
{artifact_name}_v{YYYYMMDD}_{HHMMSS}.json

ç¤ºä¾‹:
chapter_001_segmentation_v20260212_180530.json
ep01_hook_v20260212_190000.json
```

### ç‰ˆæœ¬æ¸…ç†ç­–ç•¥

**ä¿ç•™è§„åˆ™**ï¼š
- âœ… æœ€æ–°1ä¸ªç‰ˆæœ¬ï¼ˆ`_latest.json`ï¼‰ï¼šå§‹ç»ˆä¿ç•™
- âœ… æœ€è¿‘7å¤©çš„ç‰ˆæœ¬ï¼šå…¨éƒ¨ä¿ç•™
- âœ… 7-30å¤©çš„ç‰ˆæœ¬ï¼šæ¯å¤©ä¿ç•™1ä¸ªï¼ˆæœ€æ–°ï¼‰
- âœ… 30å¤©ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼šæ¯å‘¨ä¿ç•™1ä¸ªï¼ˆæœ€æ–°ï¼‰

**æ¸…ç†è„šæœ¬**ï¼ˆå¾…å®ç°ï¼‰ï¼š
```python
def cleanup_old_versions(analysis_dir: str, keep_days: int = 30):
    """æ¸…ç†æ—§ç‰ˆæœ¬ï¼Œä¿ç•™æœ€æ–°å’Œå…³é”®ç‰ˆæœ¬"""
    # å®ç°ç‰ˆæœ¬æ¸…ç†é€»è¾‘
    pass
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. è¯»å–æ•°æ®

**å§‹ç»ˆè¯»å– `_latest.json`**:
```python
# âœ… æ­£ç¡®
result = load_json(f"analysis/novel/chapter_001_segmentation_latest.json")

# âŒ é”™è¯¯ï¼ˆè¯»å–ç‰¹å®šç‰ˆæœ¬ï¼Œé™¤éæ˜ç¡®éœ€è¦ï¼‰
result = load_json(f"analysis/novel/history/chapter_001_segmentation_v20260212_180530.json")
```

### 2. ä¿å­˜æ•°æ®

**ä½¿ç”¨ ArtifactManager**:
```python
from src.core.artifact_manager import artifact_manager

# ä¿å­˜åˆ†æç»“æœ
artifact_manager.save_artifact(
    content=segmentation_result.model_dump(),
    artifact_type=f"chapter_001_segmentation",
    project_id="project_001",
    base_dir="data/projects/project_001/analysis/novel",
    extension="json"
)
# è‡ªåŠ¨ç”Ÿæˆ:
# - analysis/novel/chapter_001_segmentation_latest.json
# - analysis/novel/history/chapter_001_segmentation_v{timestamp}.json
```

### 3. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```python
import os

# æ£€æŸ¥é¢„å¤„ç†æ˜¯å¦å®Œæˆ
novel_meta_exists = os.path.exists(f"{project_dir}/processed/novel/metadata.json")
script_imported = os.path.exists(f"{project_dir}/processed/script/ep01.json")

# æ£€æŸ¥åˆ†ææ˜¯å¦å®Œæˆ
segmentation_exists = os.path.exists(f"{project_dir}/analysis/novel/chapter_001_segmentation_latest.json")
```

---

## ğŸš¨ å¸¸è§é”™è¯¯

### é”™è¯¯1: æ··æ·† processed å’Œ analysis

```python
# âŒ é”™è¯¯ï¼šå°†æ·±åº¦åˆ†æç»“æœæ”¾åœ¨ processed/
save_json(segmentation_result, "processed/novel/chapter_001.json")

# âœ… æ­£ç¡®ï¼šæ·±åº¦åˆ†æç»“æœæ”¾åœ¨ analysis/
artifact_manager.save_artifact(..., base_dir="analysis/novel")
```

### é”™è¯¯2: ç›´æ¥è¯»å– history/ ä¸­çš„æ–‡ä»¶

```python
# âŒ é”™è¯¯ï¼šç›´æ¥è¯»å–ç‰ˆæœ¬æ–‡ä»¶ï¼ˆé™¤éæ˜ç¡®éœ€è¦ç‰¹å®šç‰ˆæœ¬ï¼‰
result = load_json("analysis/novel/history/chapter_001_segmentation_v20260212_180530.json")

# âœ… æ­£ç¡®ï¼šè¯»å–æœ€æ–°ç‰ˆæœ¬
result = load_json("analysis/novel/chapter_001_segmentation_latest.json")
```

### é”™è¯¯3: è¦†ç›–åŸå§‹æ–‡ä»¶

```python
# âŒ é”™è¯¯ï¼šä¿®æ”¹åŸå§‹æ–‡ä»¶
with open("raw/novel/åºåˆ—å…¬è·¯æ±‚ç”Ÿ.txt", 'w') as f:
    f.write(modified_content)

# âœ… æ­£ç¡®ï¼šä¿å­˜åˆ° processed/
with open("processed/novel/standardized.txt", 'w') as f:
    f.write(standardized_content)
```

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### æ•°æ®å­˜å‚¨è§„èŒƒæ£€æŸ¥

- [ ] åŸå§‹æ–‡ä»¶åªæ”¾åœ¨ `raw/`
- [ ] é¢„å¤„ç†ç»“æœæ”¾åœ¨ `processed/`
- [ ] æ·±åº¦åˆ†æç»“æœæ”¾åœ¨ `analysis/`
- [ ] äººç±»å¯è¯»æŠ¥å‘Šæ”¾åœ¨ `reports/`
- [ ] ä½¿ç”¨ ArtifactManager ä¿å­˜åˆ†æç»“æœ
- [ ] å§‹ç»ˆè¯»å– `_latest.json`
- [ ] ä¸ç›´æ¥æ“ä½œ `history/` ç›®å½•

---

**æœ€åæ›´æ–°**: 2026-02-12  
**ç»´æŠ¤è€…**: Project Team
