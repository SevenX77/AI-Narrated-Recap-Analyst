# Workflow å¼€å‘è·¯çº¿å›¾

**æœ€åæ›´æ–°**: 2026-02-10  
**å½“å‰è¿›åº¦**: 3/7 workflowså®Œæˆ (43%)  
**æœ€æ–°å˜æ›´**: ScriptProcessingWorkflow å¼€å‘å®Œæˆï¼Œå¾…æµ‹è¯•

---

## ğŸ“ è®¾è®¡åŸåˆ™

1. **å·¥å…·å¤ç”¨**: Workflow æ˜¯å·¥å…·çš„ç¼–æ’å™¨ï¼Œä¸é‡å¤å®ç°å·¥å…·åŠŸèƒ½
2. **Phase æ˜ç¡®**: æ¯ä¸ª Phase èŒè´£æ¸…æ™°ï¼Œå¯ç‹¬ç«‹æµ‹è¯•
3. **é”™è¯¯æ¢å¤**: æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œå¤±è´¥åå¯ä»ä¸­æ–­å¤„ç»§ç»­
4. **è´¨é‡é—¨ç¦**: å…³é”®èŠ‚ç‚¹è¿›è¡Œè´¨é‡æ£€æŸ¥ï¼Œé¿å…ä½è´¨é‡æ•°æ®ä¼ æ’­
5. **æ¸è¿›æ„å»º**: P0 ä¼˜å…ˆçº§å…ˆè¡Œï¼Œé€æ­¥å®Œå–„é«˜çº§åŠŸèƒ½
6. **æˆæœ¬é€æ˜**: æ˜ç¡®æ ‡æ³¨ LLM è°ƒç”¨æˆæœ¬ï¼Œä¾¿äºé¢„ç®—æ§åˆ¶

---

## ğŸ¯ Workflow æ¶æ„è®¾è®¡

### æ ¸å¿ƒæµç¨‹å›¾

```
åŸå§‹ç´ æ (novel.txt + ep01.srt)
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                  â”‚
    â”‚  Phase I: ç´ æå¤„ç†ï¼ˆå¹¶è¡Œï¼‰        â”‚
    â”‚                                  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                 â”‚                â”‚
    â–¼                 â–¼                â”‚
NovelProcessing  ScriptProcessing     â”‚
Workflow         Workflow              â”‚
    â”‚                 â”‚                â”‚
    â”‚ AnnotatedChapterâ”‚                â”‚
    â”‚                 â”‚ Segmented      â”‚
    â”‚                 â”‚ Script         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                â”‚
    â”‚  Phase II: å¯¹é½åˆ†æ            â”‚
    â”‚                                â”‚
    â”‚  AlignmentWorkflow             â”‚
    â”‚                                â”‚
    â”‚  è¾“å‡º: AlignmentResult         â”‚
    â”‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                â”‚
    â”‚  Phase III: ç»¼åˆç¼–æ’           â”‚
    â”‚                                â”‚
    â”‚  FullPipelineWorkflow          â”‚
    â”‚                                â”‚
    â”‚  è¾“å‡º: ProjectReport (HTML)    â”‚
    â”‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Phase åˆ’åˆ†ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

## Phase I: æ ¸å¿ƒç´ æå¤„ç† âœ… (å·²å®Œæˆ 2/2)

### ç›®æ ‡
å®Œæˆ Novel å’Œ Script çš„ç‹¬ç«‹å¤„ç†æµç¨‹ï¼Œç”Ÿæˆç»“æ„åŒ–æ•°æ®ã€‚

---

### Workflow 1: `NovelProcessingWorkflow` âœ… (æµ‹è¯•ä¸­)

**ç›®æ ‡**: ä»åŸå§‹å°è¯´åˆ°å®Œæ•´ç« èŠ‚åˆ†æ

**èŒè´£**:
- å°è¯´å¯¼å…¥ä¸è§„èŒƒåŒ–
- å…ƒæ•°æ®æå–
- ç« èŠ‚æ£€æµ‹ä¸åˆ†æ®µ
- äº‹ä»¶æ—¶é—´çº¿æ ‡æ³¨
- ç³»ç»Ÿå…ƒç´ åˆ†æä¸è¿½è¸ª
- è´¨é‡éªŒè¯

**æµç¨‹å›¾**:
```
Novel.txt â†’ NovelImporter â†’ NovelMetadataExtractor â†’ NovelChapterDetector
              â†“
        NovelSegmenter (å¹¶è¡Œå¤„ç†å„ç« èŠ‚)
              â†“
        NovelAnnotator (å¹¶è¡Œå¤„ç†å„ç« èŠ‚)
              â†“
        NovelSystemAnalyzer (å…¨ä¹¦ä¸€æ¬¡)
              â†“
        NovelSystemDetector (æ¯ç« ) + NovelSystemTracker (æ¯ç« )
              â†“
        NovelValidator (è´¨é‡éªŒè¯)
              â†“
        è¾“å‡º: NovelProcessingResult
```

**è¾“å…¥**:
- `novel_path` (str): åŸå§‹å°è¯´æ–‡ä»¶è·¯å¾„
- `project_name` (str): é¡¹ç›®åç§°
- `config` (NovelProcessingConfig): é…ç½®å¯¹è±¡
  - `chapter_range` (Tuple[int, int]): ç« èŠ‚èŒƒå›´ï¼Œå¦‚ (1, 10)
  - `enable_parallel` (bool): æ˜¯å¦å¹¶è¡Œå¤„ç†ç« èŠ‚
  - `enable_system_analysis` (bool): æ˜¯å¦å¯ç”¨ç³»ç»Ÿå…ƒç´ åˆ†æ
  - `enable_functional_tags` (bool): æ˜¯å¦å¯ç”¨åŠŸèƒ½æ€§æ ‡ç­¾
  - `max_workers` (int): å¹¶è¡Œå·¥ä½œæ•°é‡
  - `retry_config` (RetryConfig): é‡è¯•é…ç½®

**è¾“å‡º**: `NovelProcessingResult`
```python
{
    "success": bool,
    "project_name": str,
    "metadata": NovelMetadata,
    "chapters": List[ChapterInfo],
    "segmentation_results": List[ParagraphSegmentationResult],
    "annotation_results": List[AnnotatedChapter],
    "system_catalog": Optional[SystemCatalog],
    "validation_report": NovelValidationReport,
    "processing_time": float,
    "total_cost": float,
    "errors": List[ChapterProcessingError]
}
```

**ä¾èµ–å·¥å…·**:
- âœ… NovelImporter
- âœ… NovelMetadataExtractor
- âœ… NovelChapterDetector
- âœ… NovelSegmenter
- âœ… NovelAnnotator
- âœ… NovelSystemAnalyzer
- âœ… NovelSystemDetector
- âœ… NovelSystemTracker
- âœ… NovelValidator

**å®ç°çŠ¶æ€**: âœ… å·²å®Œæˆï¼Œæ­£åœ¨æµ‹è¯• (2026-02-10)  
**æ–‡ä»¶**: `src/workflows/novel_processing_workflow.py`  
**æ–‡æ¡£**: `docs/workflows/novel_processing_workflow.md`  
**æµ‹è¯•**: `scripts/test/test_novel_processing_workflow.py`

**å…³é”®ç‰¹æ€§**:
- âœ… å¹¶è¡Œå¤„ç†ç« èŠ‚ï¼ˆçº¿ç¨‹æ± ï¼‰
- âœ… é”™è¯¯æ¢å¤ä¸æ–­ç‚¹ç»­ä¼ 
- âœ… å®æ—¶è¿›åº¦ç›‘æ§
- âœ… LLM rate limiting é›†æˆ
- âœ… è´¨é‡é—¨ç¦ï¼ˆéªŒè¯å¤±è´¥æ—¶è­¦å‘Šï¼‰
- âœ… æˆæœ¬ç»Ÿè®¡ä¸é¢„ç®—æ§åˆ¶

**æˆæœ¬ä¼°ç®—**: 
- å•ç« æˆæœ¬: $0.20-0.30 USD (å«ç³»ç»Ÿåˆ†æ)
- 10ç« æˆæœ¬: $2.00-3.00 USD

**æ€§èƒ½æŒ‡æ ‡**:
- å•ç« å¤„ç†æ—¶é—´: 2-5 åˆ†é’Ÿ
- 10ç« å¹¶è¡Œå¤„ç†: 10-15 åˆ†é’Ÿ (max_workers=3)

**è´¨é‡æ ‡å‡†**:
- NovelValidationReport è¯„åˆ† â‰¥ 80 åˆ†ï¼ˆé€šè¿‡ï¼‰
- 60-80 åˆ†ï¼ˆè­¦å‘Šï¼Œå¯ç»§ç»­ï¼‰
- < 60 åˆ†ï¼ˆå»ºè®®åœæ­¢ï¼Œäººå·¥æ£€æŸ¥ï¼‰

---

### Workflow 2: `ScriptProcessingWorkflow` âœ… (å·²å®Œæˆ)

**ç›®æ ‡**: ä»SRTæ–‡ä»¶åˆ°ç»“æ„åŒ–è„šæœ¬åˆ†æ®µ

**èŒè´£**:
- SRT å¯¼å…¥ä¸è§„èŒƒåŒ–
- æ–‡æœ¬æå–ä¸æ™ºèƒ½ä¿®å¤
- Hook è¾¹ç•Œæ£€æµ‹ï¼ˆep01ï¼‰
- Hook å†…å®¹åˆ†æï¼ˆå¯é€‰ï¼‰
- è„šæœ¬è¯­ä¹‰åˆ†æ®µï¼ˆABC åˆ†ç±»ï¼‰
- è´¨é‡éªŒè¯

**æµç¨‹å›¾**:
```
ep01.srt â†’ SrtImporter â†’ SrtTextExtractor
                             â†“
                      HookDetector (ä»… ep01)
                             â†“
                   HookContentAnalyzer (å¯é€‰)
                             â†“
                   ScriptSegmenter (ABC åˆ†ç±»)
                             â†“
                      ScriptValidator
                             â†“
                   è¾“å‡º: ScriptProcessingResult
```

**Phase è®¾è®¡**:

#### Phase 1: SRT å¯¼å…¥ä¸è§„èŒƒåŒ– (5-10ç§’)
```python
â””â”€ SrtImporter.execute(srt_path)
    â”œâ”€ ç¼–ç æ£€æµ‹ä¸ç»Ÿä¸€ (UTF-8)
    â”œâ”€ æ—¶é—´è½´æ ¼å¼éªŒè¯ (00:00:00,000 æ ¼å¼)
    â”œâ”€ SRT ç»“æ„ä¿®å¤ (åºå·ã€ç©ºè¡Œ)
    â””â”€ è¾“å‡º: List[SrtEntry]
```

**å·¥å…·**: SrtImporter  
**æˆæœ¬**: æ—  LLM è°ƒç”¨  
**è´¨é‡æ£€æŸ¥**:
- æ—¶é—´è½´è¿ç»­æ€§ï¼ˆæ— è·³è·ƒ > 5ç§’ï¼‰
- ç¼–ç æ­£ç¡®æ€§ï¼ˆæ— ä¹±ç å­—ç¬¦ï¼‰

---

#### Phase 2: æ–‡æœ¬æå–ä¸æ™ºèƒ½ä¿®å¤ (30-60ç§’, LLM)
```python
â””â”€ SrtTextExtractor.execute(srt_entries, novel_reference)
    â”œâ”€ ç§»é™¤æ—¶é—´è½´ä¿¡æ¯
    â”œâ”€ æ™ºèƒ½æ·»åŠ æ ‡ç‚¹ç¬¦å· (LLM)
    â”œâ”€ ä¿®æ­£é”™åˆ«å­—å’ŒåŒéŸ³é”™å­— (LLM)
    â”œâ”€ å®ä½“æ ‡å‡†åŒ– (æœ‰/æ—  Novel å‚è€ƒ)
    â””â”€ è¾“å‡º: SrtTextExtractionResult
        â”œâ”€ extracted_text: str (çº¯æ–‡æœ¬)
        â””â”€ timestamp_mapping: Dict[int, SrtEntry]
```

**å·¥å…·**: SrtTextExtractor  
**LLM**: DeepSeek v3.2 (æ ¼å¼å¤„ç†ä»»åŠ¡)  
**Prompt**: `srt_script_processing_with_novel.yaml` (æœ‰Novel) / `without_novel.yaml` (æ— Novel)  
**Token æ¶ˆè€—**: çº¦ 5K-8K input + 2K-3K output  
**æˆæœ¬**: $0.02-0.04 USD

**è´¨é‡æ£€æŸ¥**:
- æ–‡æœ¬è¦†ç›–ç‡ â‰¥ 95% (SRTæ¡ç›®æ•°é‡)
- æ— æ˜æ˜¾ä¹±ç æˆ–ç¼ºå­—

---

#### Phase 3: Hook è¾¹ç•Œæ£€æµ‹ (20-40ç§’, LLM, ä»… ep01)
```python
â””â”€ HookDetector.execute(segmented_script, novel_intro)
    â”œâ”€ 5 ç‰¹å¾åˆ¤æ–­:
    â”‚   1. ç‹¬ç«‹è¯­ä¹‰æ®µè½
    â”‚   2. éå…·è±¡çš„å½“ä¸‹æè¿°ï¼ˆæ€»ç»“/é¢„å‘Šï¼‰
    â”‚   3. Hook åè¿è´¯æ€§å¢å¼º
    â”‚   4. Hook åå¯åœ¨ Novel å¼€å¤´åŒ¹é…
    â”‚   5. Hook ä¸ç®€ä»‹ç›¸ä¼¼åº¦é«˜
    â”œâ”€ å®šä½ Body èµ·ç‚¹æ—¶é—´
    â””â”€ è¾“å‡º: HookDetectionResult
        â”œâ”€ has_hook: bool
        â”œâ”€ hook_end_time: float (ç§’)
        â”œâ”€ body_start_index: int
        â””â”€ confidence: float (0-1)
```

**å·¥å…·**: HookDetector  
**LLM**: DeepSeek v3.2 æˆ– Claude  
**Prompt**: `hook_detection.yaml`  
**Token æ¶ˆè€—**: çº¦ 3K-5K input + 500-1K output  
**æˆæœ¬**: $0.01-0.03 USD

**è´¨é‡æ£€æŸ¥**:
- ç½®ä¿¡åº¦ â‰¥ 0.8 (é«˜ç½®ä¿¡åº¦)
- 0.6-0.8 (ä¸­ç­‰ç½®ä¿¡åº¦ï¼Œè­¦å‘Š)
- < 0.6 (ä½ç½®ä¿¡åº¦ï¼Œå»ºè®®äººå·¥å®¡æ ¸)

**æ³¨æ„**: ä»…å¯¹ ep01 æ‰§è¡Œï¼Œep02+ è·³è¿‡æ­¤æ­¥éª¤

---

#### Phase 4: Hook å†…å®¹åˆ†æ (30-50ç§’, LLM, å¯é€‰)
```python
â””â”€ HookContentAnalyzer.execute(hook_text, novel_intro, novel_metadata)
    â”œâ”€ åˆ†å±‚æå–:
    â”‚   1. ä¸–ç•Œè§‚è®¾å®š (World Building)
    â”‚   2. ç³»ç»Ÿæœºåˆ¶ (Game Mechanics)
    â”‚   3. é“å…·è£…å¤‡ (Items/Equipment)
    â”‚   4. æƒ…èŠ‚äº‹ä»¶ (Plot Events)
    â”œâ”€ å¯¹æ¯” Novel ç®€ä»‹ (Jaccard ç›¸ä¼¼åº¦)
    â”œâ”€ æ¨æ–­æ¥æº (ç®€ä»‹/ç« èŠ‚/ç‹¬ç«‹åˆ›ä½œ)
    â””â”€ è¾“å‡º: HookAnalysisResult
        â”œâ”€ layered_content: Dict[str, List[str]]
        â”œâ”€ similarity_scores: Dict[str, float]
        â””â”€ source_inference: str
```

**å·¥å…·**: HookContentAnalyzer  
**LLM**: DeepSeek v3.2  
**Prompt**: `hook_content_analysis.yaml`  
**Token æ¶ˆè€—**: çº¦ 4K-6K input + 1K-2K output  
**æˆæœ¬**: $0.02-0.04 USD

**è´¨é‡æ£€æŸ¥**:
- åˆ†å±‚å†…å®¹å®Œæ•´æ€§ï¼ˆ4å±‚éƒ½æœ‰æå–ï¼‰
- ç›¸ä¼¼åº¦è®¡ç®—æ­£å¸¸ï¼ˆ0-1èŒƒå›´ï¼‰

**è·³è¿‡æ¡ä»¶**:
- æ—  Novel å‚è€ƒï¼ˆçº¯ Script é¡¹ç›®ï¼‰
- æœªæ£€æµ‹åˆ° Hookï¼ˆhas_hook=Falseï¼‰

---

#### Phase 5: è„šæœ¬è¯­ä¹‰åˆ†æ®µ (60-120ç§’, Two-Pass LLM)
```python
â””â”€ ScriptSegmenter.execute(extracted_text, srt_entries)
    â”œâ”€ Pass 1: åˆæ­¥åˆ†æ®µ
    â”‚   â”œâ”€ æŒ‰åœºæ™¯è½¬æ¢åˆ†æ®µ
    â”‚   â”œâ”€ æŒ‰æƒ…èŠ‚è½¬æŠ˜åˆ†æ®µ
    â”‚   â””â”€ æŒ‰å¯¹è¯åˆ‡æ¢åˆ†æ®µ
    â”‚   â†“ è¾“å‡º: æ®µè½è¾¹ç•Œï¼ˆå¥å­åºå·èŒƒå›´ï¼‰
    â”‚
    â”œâ”€ Pass 2: æ ¡éªŒä¿®æ­£
    â”‚   â”œâ”€ æ£€æŸ¥åˆ†æ®µåˆç†æ€§
    â”‚   â”œâ”€ ä¿®æ­£è¿‡åº¦åˆ†æ®µ/æ¬ åˆ†æ®µ
    â”‚   â””â”€ ç¡®è®¤æœ€ç»ˆè¾¹ç•Œ
    â”‚   â†“ è¾“å‡º: ä¿®æ­£åçš„æ®µè½è¾¹ç•Œ
    â”‚
    â”œâ”€ Pass 3: ABC ç±»åˆ†ç±»
    â”‚   â”œâ”€ A ç±» - è®¾å®š (Setting): æ—ç™½è®²è§£ä¸–ç•Œè§‚ã€è§„åˆ™è¯´æ˜
    â”‚   â”œâ”€ B ç±» - äº‹ä»¶ (Event): å¯¹è¯ã€åŠ¨ä½œã€åœºæ™¯æ¨è¿›
    â”‚   â””â”€ C ç±» - ç³»ç»Ÿ (System): ç³»ç»Ÿæç¤ºéŸ³ã€æ•°æ®é¢æ¿æ˜¾ç¤º
    â”‚   â†“ è¾“å‡º: æ¯ä¸ªæ®µè½çš„ç±»å‹æ ‡ç­¾
    â”‚
    â””â”€ è¾“å‡º: ScriptSegmentationResult
        â””â”€ segments: List[ScriptSegment]
            â”œâ”€ segment_id: str
            â”œâ”€ sentence_range: Tuple[int, int]
            â”œâ”€ content: str
            â”œâ”€ category: str (A/B/C)
            â”œâ”€ srt_range: Tuple[int, int]
            â””â”€ timestamp_range: Tuple[float, float]
```

**å·¥å…·**: ScriptSegmenter (v2)  
**LLM**: DeepSeek v3.2 (é»˜è®¤)  
**Prompt**: 
- `script_segmentation_pass1.yaml` (Pass 1)
- `script_segmentation_pass2.yaml` (Pass 2)
- `script_segmentation_abc_classification.yaml` (Pass 3)

**Token æ¶ˆè€—**: çº¦ 8K-12K input + 3K-5K output (Three-Pass)  
**æˆæœ¬**: $0.04-0.08 USD

**è´¨é‡æ£€æŸ¥**:
- æ®µè½æ•°é‡ï¼š5-20 æ®µ/é›†ï¼ˆåˆç†èŒƒå›´ï¼‰
- ABC ç±»å‹åˆ†å¸ƒï¼šA: 5-15%, B: 80-95%, C: 0-5%
- æ—¶é—´æˆ³åŒ¹é…å‡†ç¡®æ€§ï¼š100%

---

#### Phase 6: è´¨é‡éªŒè¯ (5ç§’)
```python
â””â”€ ScriptValidator.execute(srt_entries, extraction_result, segmentation_result)
    â”œâ”€ æ—¶é—´è½´è¿ç»­æ€§æ£€æŸ¥
    â”‚   â”œâ”€ æ£€æŸ¥æ—¶é—´è·³è·ƒ (> 5ç§’)
    â”‚   â””â”€ æ£€æŸ¥æ—¶é—´é‡å 
    â”œâ”€ æ–‡æœ¬å®Œæ•´æ€§éªŒè¯
    â”‚   â”œâ”€ SRT è¦†ç›–ç‡ (> 95%)
    â”‚   â””â”€ å†…å®¹è¿˜åŸåº¦
    â”œâ”€ åˆ†æ®µåˆç†æ€§æ£€æŸ¥
    â”‚   â”œâ”€ åˆ†æ®µæ•°é‡ (5-20æ®µ/é›†)
    â”‚   â”œâ”€ æ—¶é—´æˆ³åŒ¹é…å‡†ç¡®æ€§ (100%)
    â”‚   â””â”€ æ®µè½é•¿åº¦åˆ†å¸ƒ
    â””â”€ è¾“å‡º: ScriptValidationReport
        â”œâ”€ quality_score: int (0-100)
        â”œâ”€ issues: List[str]
        â””â”€ suggestions: List[str]
```

**å·¥å…·**: ScriptValidator  
**æˆæœ¬**: æ—  LLM è°ƒç”¨

**è´¨é‡æ ‡å‡†**:
- â‰¥ 85 åˆ†ï¼šä¼˜ç§€ï¼ˆé€šè¿‡ï¼‰
- 70-85 åˆ†ï¼šè‰¯å¥½ï¼ˆé€šè¿‡ï¼Œæœ‰è­¦å‘Šï¼‰
- 60-70 åˆ†ï¼šåŠæ ¼ï¼ˆå»ºè®®äººå·¥å®¡æ ¸ï¼‰
- < 60 åˆ†ï¼šä¸åˆæ ¼ï¼ˆå»ºè®®åœæ­¢ï¼Œæ£€æŸ¥é—®é¢˜ï¼‰

---

#### Phase 7: å·¥ä»¶ä¿å­˜
```python
â””â”€ ArtifactManager.save_artifacts()
    â”œâ”€ srt_import_result.json
    â”œâ”€ text_extraction_result.json
    â”œâ”€ hook_detection_result.json (å¦‚æœ‰)
    â”œâ”€ hook_analysis_result.json (å¦‚æœ‰)
    â”œâ”€ script_segmentation_result.json
    â””â”€ script_validation_report.json
```

---

**è¾“å…¥**:
- `srt_path` (str): SRT æ–‡ä»¶è·¯å¾„
- `project_name` (str): é¡¹ç›®åç§°
- `episode_id` (str): é›†æ•°æ ‡è¯†ï¼ˆå¦‚ "ep01"ï¼‰
- `novel_reference` (Optional[str]): Novel æ–‡æœ¬ï¼ˆå¯é€‰ï¼Œç”¨äºå®ä½“æ ‡å‡†åŒ–ï¼‰
- `novel_intro` (Optional[str]): Novel ç®€ä»‹ï¼ˆå¯é€‰ï¼Œç”¨äº Hook æ£€æµ‹ï¼‰
- `config` (ScriptProcessingConfig): é…ç½®å¯¹è±¡
  - `enable_hook_detection` (bool): æ˜¯å¦å¯ç”¨ Hook æ£€æµ‹ï¼ˆä»… ep01ï¼‰
  - `enable_hook_analysis` (bool): æ˜¯å¦å¯ç”¨ Hook å†…å®¹åˆ†æ
  - `retry_config` (RetryConfig): é‡è¯•é…ç½®

**è¾“å‡º**: `ScriptProcessingResult`
```python
{
    "success": bool,
    "project_name": str,
    "episode_id": str,
    "srt_entries": List[SrtEntry],
    "extracted_text": str,
    "hook_result": Optional[HookDetectionResult],
    "hook_analysis": Optional[HookAnalysisResult],
    "segmentation_result": ScriptSegmentationResult,
    "validation_report": ScriptValidationReport,
    "processing_time": float,
    "total_cost": float,
    "errors": List[str]
}
```

**ä¾èµ–å·¥å…·**:
- âœ… SrtImporter
- âœ… SrtTextExtractor
- âœ… HookDetector
- âœ… HookContentAnalyzer
- âœ… ScriptSegmenter (v2, ABC åˆ†ç±»)
- âœ… ScriptValidator
- â³ ScriptTagger (P2ä¼˜å…ˆçº§ï¼Œå¯é€‰)

**å®ç°çŠ¶æ€**: âœ… å·²å®Œæˆ (2026-02-10)  
**æ–‡ä»¶**: `src/workflows/script_processing_workflow.py`  
**æ–‡æ¡£**: `docs/workflows/script_processing_workflow.md`  
**æµ‹è¯•**: `scripts/test/test_script_processing_workflow.py`  
**å®é™…å¼€å‘æ—¶é—´**: 1 å¤©

**æˆæœ¬ä¼°ç®—**:
- å•é›†æˆæœ¬ (å« Hook): $0.09-0.19 USD
- å•é›†æˆæœ¬ (æ—  Hook): $0.06-0.12 USD
- 10é›†æˆæœ¬: $0.60-1.20 USD (ep01 å« Hookï¼Œep02-10 æ—  Hook)

**æ€§èƒ½æŒ‡æ ‡**:
- å•é›†å¤„ç†æ—¶é—´ (å« Hook): 2-4 åˆ†é’Ÿ
- å•é›†å¤„ç†æ—¶é—´ (æ—  Hook): 1.5-3 åˆ†é’Ÿ

**è´¨é‡æ ‡å‡†**:
- ScriptValidationReport è¯„åˆ† â‰¥ 85 åˆ†ï¼ˆä¼˜ç§€ï¼‰
- 70-85 åˆ†ï¼ˆè‰¯å¥½ï¼Œå¯ç»§ç»­ï¼‰
- 60-70 åˆ†ï¼ˆåŠæ ¼ï¼Œå»ºè®®äººå·¥å®¡æ ¸ï¼‰
- < 60 åˆ†ï¼ˆä¸åˆæ ¼ï¼Œå»ºè®®åœæ­¢ï¼‰

**æµ‹è¯•è®¡åˆ’**:
1. **å•å…ƒæµ‹è¯•**: æ¯ä¸ª Phase ç‹¬ç«‹æµ‹è¯•
2. **é›†æˆæµ‹è¯•**: å®Œæ•´æµç¨‹æµ‹è¯•ï¼ˆå¤©å‘½æ¡ƒèŠ± ep01ï¼‰
3. **è¾¹ç•Œæµ‹è¯•**: 
   - æ—  Novel å‚è€ƒ
   - æ—  Hook çš„è„šæœ¬
   - å¼‚å¸¸æ ¼å¼ SRT
4. **æ€§èƒ½æµ‹è¯•**: 10é›†å¹¶è¡Œå¤„ç†

---

## Phase II: å¯¹é½åˆ†æ ğŸš§ (å¾…å¼€å‘ 0/1)

### ç›®æ ‡
å»ºç«‹ Novel ä¸ Script çš„å¥å­çº§å¯¹åº”å…³ç³»ï¼Œè¯†åˆ«æ”¹ç¼–ç­–ç•¥ã€‚

---

### Workflow 3: `AlignmentWorkflow` ğŸš§ (å¾…å¼€å‘)

**ç›®æ ‡**: Novel ä¸ Script çš„å¥å­çº§å¯¹é½åˆ†æ

**èŒè´£**:
- æ•°æ®åŠ è½½ä¸éªŒè¯
- Hook-Body åˆ†ç¦»ç­–ç•¥
- å¥å­çº§å¯¹é½åˆ†æ
- ABC ç±»å‹åŒ¹é…åˆ†æ
- è¦†ç›–ç‡ä¸æ”¹ç¼–åˆ†æ
- è´¨é‡è¯„ä¼°ä¸æŠ¥å‘Šç”Ÿæˆ

**æµç¨‹å›¾**:
```
AnnotatedChapter + ScriptSegmentationResult + HookDetectionResult
                        â†“
                 æ•°æ®éªŒè¯ (å®Œæ•´æ€§æ£€æŸ¥)
                        â†“
              Hook-Body åˆ†ç¦»ç­–ç•¥åˆ¤æ–­
                        â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                       â”‚
        Hook éƒ¨åˆ†              Body éƒ¨åˆ†
            â”‚                       â”‚
    ä¸ Novel ç®€ä»‹å¯¹é½       ä¸ Novel ç« èŠ‚å¯¹é½
    (ç›¸ä¼¼åº¦åŒ¹é…)            (æ ‡å‡†æµç¨‹)
            â”‚                       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
            NovelScriptAligner (å¥å­çº§å¯¹é½)
                        â†“
            ABC ç±»å‹åŒ¹é…åˆ†æ
                        â†“
            è¦†ç›–ç‡ä¸æ”¹ç¼–åˆ†æ
                        â†“
            è´¨é‡è¯„ä¼°ä¸æŠ¥å‘Šç”Ÿæˆ
                        â†“
            è¾“å‡º: AlignmentResult + AlignmentQualityReport
```

**Phase è®¾è®¡**:

#### Phase 1: æ•°æ®åŠ è½½ä¸éªŒè¯ (5ç§’)
```python
â””â”€ åŠ è½½æ•°æ®:
    â”œâ”€ AnnotatedChapter (Novel æ ‡æ³¨ç»“æœ)
    â”œâ”€ ScriptSegmentationResult (Script åˆ†æ®µç»“æœ)
    â””â”€ HookDetectionResult (Hook æ£€æµ‹ç»“æœ, å¯é€‰)
    â†“
â””â”€ éªŒè¯æ•°æ®å®Œæ•´æ€§:
    â”œâ”€ Novel: äº‹ä»¶æ—¶é—´çº¿ã€è®¾å®šåº“å®Œæ•´æ€§
    â”œâ”€ Script: æ®µè½æ•°é‡ã€ABC åˆ†ç±»å®Œæ•´æ€§
    â””â”€ Hook: è¾¹ç•Œä½ç½®åˆæ³•æ€§
    â†“
â””â”€ è¾“å‡º: éªŒè¯é€šè¿‡ / å¤±è´¥ (é”™è¯¯ä¿¡æ¯)
```

**è´¨é‡æ£€æŸ¥**:
- Novel äº‹ä»¶æ•°é‡ > 0
- Script æ®µè½æ•°é‡ > 0
- Hook è¾¹ç•Œä½ç½®åˆç†ï¼ˆå¦‚æœ‰ï¼‰

---

#### Phase 2: Hook-Body åˆ†ç¦»ç­–ç•¥ (å³æ—¶)
```python
â””â”€ å¦‚æœæ£€æµ‹åˆ° Hook (has_hook=True):
    â”œâ”€ Hook éƒ¨åˆ† (æ—¶é—´ 0 â†’ hook_end_time):
    â”‚   â”œâ”€ æå– Hook æ®µè½
    â”‚   â””â”€ ç­–ç•¥: ä¸ Novel ç®€ä»‹å¯¹é½ (ç›¸ä¼¼åº¦åŒ¹é…)
    â”‚
    â””â”€ Body éƒ¨åˆ† (æ—¶é—´ hook_end_time â†’ ç»“æŸ):
        â”œâ”€ æå– Body æ®µè½
        â””â”€ ç­–ç•¥: ä¸ Novel ç« èŠ‚å¯¹é½ (æ ‡å‡†æµç¨‹)
    â†“
â””â”€ å¦‚æœæ—  Hook (has_hook=False):
    â””â”€ å…¨éƒ¨ Script â†’ ä¸ Novel ç« èŠ‚å¯¹é½ (æ ‡å‡†æµç¨‹)
    â†“
â””â”€ è¾“å‡º: AlignmentStrategy
    â”œâ”€ hook_alignment_mode: bool
    â”œâ”€ hook_segments: List[ScriptSegment]
    â””â”€ body_segments: List[ScriptSegment]
```

**è®¾è®¡ç†ç”±**:
- Hook éƒ¨åˆ†é€šå¸¸æ˜¯åŸåˆ›å†…å®¹ï¼Œä¸å…·ä½“ç« èŠ‚æ— ç›´æ¥å¯¹åº”
- Body éƒ¨åˆ†æ˜¯æ ‡å‡†çš„ Novelâ†’Script æ”¹ç¼–

---

#### Phase 3: å¥å­çº§å¯¹é½ (60-120ç§’, LLM)
```python
â””â”€ NovelScriptAligner.execute(annotated_chapter, script_segments)
    â”œâ”€ åŸºäº Novel Annotation:
    â”‚   â”œâ”€ äº‹ä»¶æ—¶é—´çº¿ (EventTimeline)
    â”‚   â””â”€ è®¾å®šçŸ¥è¯†åº“ (SettingLibrary)
    â”‚
    â”œâ”€ å¯¹é½ç­–ç•¥:
    â”‚   â”œâ”€ Script å¥å­ â†’ Novel æ®µè½/äº‹ä»¶æ˜ å°„
    â”‚   â”œâ”€ æ”¹å†™ç­–ç•¥è¯†åˆ« (exact/paraphrase/summarize/expand/none)
    â”‚   â””â”€ ç½®ä¿¡åº¦è¯„ä¼° (0-1)
    â”‚
    â””â”€ è¾“å‡º: AlignmentResult
        â””â”€ alignments: List[Alignment]
            â”œâ”€ script_segment_id: str
            â”œâ”€ novel_paragraph_id: str (æˆ– event_id)
            â”œâ”€ alignment_type: str (event/setting)
            â”œâ”€ rewrite_strategy: str
            â””â”€ confidence: float
```

**å·¥å…·**: NovelScriptAligner  
**LLM**: Claude Sonnet 4.5 (æ¨èï¼Œè¯­ä¹‰ç†è§£å¼º)  
**Prompt**: `novel_script_alignment.yaml`  
**Token æ¶ˆè€—**: çº¦ 10K-15K input + 3K-5K output  
**æˆæœ¬**: $0.08-0.12 USD / ç« 

**è´¨é‡æ£€æŸ¥**:
- å¹³å‡ç½®ä¿¡åº¦ â‰¥ 0.85 (é«˜è´¨é‡)
- 0.70-0.85 (ä¸­ç­‰è´¨é‡)
- < 0.70 (ä½è´¨é‡ï¼Œå»ºè®®äººå·¥å®¡æ ¸)

---

#### Phase 4: ABC ç±»å‹åŒ¹é…åˆ†æ (10ç§’)
```python
â””â”€ ç±»å‹ä¸€è‡´æ€§æ£€æŸ¥:
    â”œâ”€ Novel A ç±» (è®¾å®š) â†’ Script A ç±» (è®¾å®šæ—ç™½)
    â”‚   â”œâ”€ ç»Ÿè®¡åŒ¹é…æ•°é‡
    â”‚   â””â”€ è¯†åˆ«ä¸åŒ¹é…é¡¹
    â”‚
    â”œâ”€ Novel B ç±» (äº‹ä»¶) â†’ Script B ç±» (å¯¹è¯/åŠ¨ä½œ)
    â”‚   â”œâ”€ ç»Ÿè®¡åŒ¹é…æ•°é‡
    â”‚   â””â”€ è¯†åˆ«ä¸åŒ¹é…é¡¹
    â”‚
    â””â”€ Novel C ç±» (ç³»ç»Ÿ) â†’ Script C ç±» (ç³»ç»Ÿæç¤ºéŸ³)
        â”œâ”€ ç»Ÿè®¡åŒ¹é…æ•°é‡
        â””â”€ è¯†åˆ«ä¸åŒ¹é…é¡¹
    â†“
â””â”€ ç±»å‹ä¸åŒ¹é…æ£€æµ‹ (æ”¹ç¼–è°ƒæ•´):
    â”œâ”€ Aâ†’B: è®¾å®šé€šè¿‡äº‹ä»¶å±•ç¤º (show, don't tell)
    â”œâ”€ Bâ†’A: äº‹ä»¶ç®€åŒ–ä¸ºè®¾å®šè¯´æ˜
    â””â”€ å…¶ä»–ç±»å‹è½¬æ¢
    â†“
â””â”€ è¾“å‡º: TypeMatchingReport
    â”œâ”€ type_consistency_score: float (0-1)
    â”œâ”€ match_stats: Dict[str, int]
    â””â”€ mismatches: List[TypeMismatch]
```

**è´¨é‡æ£€æŸ¥**:
- ç±»å‹ä¸€è‡´æ€§ â‰¥ 0.8 (é«˜ä¸€è‡´æ€§)
- 0.6-0.8 (ä¸­ç­‰ä¸€è‡´æ€§)
- < 0.6 (ä½ä¸€è‡´æ€§ï¼Œå¯èƒ½æ”¹ç¼–è¾ƒå¤š)

---

#### Phase 5: è¦†ç›–ç‡ä¸æ”¹ç¼–åˆ†æ (å³æ—¶)
```python
â””â”€ è¦†ç›–ç‡ç»Ÿè®¡:
    â”œâ”€ äº‹ä»¶è¦†ç›–ç‡:
    â”‚   â””â”€ Novel äº‹ä»¶ â†’ Script æ®µè½ (ç™¾åˆ†æ¯”)
    â”‚
    â”œâ”€ è®¾å®šè¦†ç›–ç‡:
    â”‚   â””â”€ Novel è®¾å®š â†’ Script è®¾å®š (ç™¾åˆ†æ¯”)
    â”‚
    â””â”€ ç³»ç»Ÿå…ƒç´ è¦†ç›–ç‡:
        â””â”€ Novel ç³»ç»Ÿå…ƒç´  â†’ Script C ç±»æ®µè½ (ç™¾åˆ†æ¯”)
    â†“
â””â”€ æ”¹ç¼–ç­–ç•¥ç»Ÿè®¡:
    â”œâ”€ æ”¹å†™æ–¹å¼åˆ†å¸ƒ:
    â”‚   â”œâ”€ exact: åŸæ–‡ç…§æ¬ (0-10%)
    â”‚   â”œâ”€ paraphrase: æ”¹å†™ (60-80%)
    â”‚   â”œâ”€ summarize: æµ“ç¼© (10-30%)
    â”‚   â””â”€ expand: æ‰©å±• (0-10%)
    â”‚
    â”œâ”€ åˆ å‡å†…å®¹è¯†åˆ«:
    â”‚   â””â”€ Novel æœ‰ä½† Script æ—  (æœªè¦†ç›–çš„æ®µè½/äº‹ä»¶)
    â”‚
    â””â”€ æ–°å¢å†…å®¹è¯†åˆ«:
        â””â”€ Script æœ‰ä½† Novel æ—  (åŸåˆ›å†…å®¹)
    â†“
â””â”€ è¾“å‡º: CoverageReport + AdaptationReport
    â”œâ”€ event_coverage: float (0-1)
    â”œâ”€ setting_coverage: float (0-1)
    â”œâ”€ system_coverage: float (0-1)
    â”œâ”€ rewrite_distribution: Dict[str, float]
    â”œâ”€ omitted_content: List[str]
    â””â”€ original_content: List[str]
```

**è´¨é‡æ£€æŸ¥**:
- äº‹ä»¶è¦†ç›–ç‡ â‰¥ 0.8 (é«˜è¦†ç›–)
- è®¾å®šè¦†ç›–ç‡ â‰¥ 0.6 (åˆç†è¦†ç›–)
- æ”¹å†™æ–¹å¼åˆ†å¸ƒåˆç†ï¼ˆä»¥ paraphrase ä¸ºä¸»ï¼‰

---

#### Phase 6: è´¨é‡è¯„ä¼°ä¸æŠ¥å‘Šç”Ÿæˆ (å³æ—¶)
```python
â””â”€ å¯¹é½è´¨é‡è¯„åˆ†:
    â”œâ”€ è¦†ç›–ç‡å¾—åˆ† (0-40 åˆ†):
    â”‚   â”œâ”€ äº‹ä»¶è¦†ç›–ç‡ Ã— 20
    â”‚   â””â”€ è®¾å®šè¦†ç›–ç‡ Ã— 20
    â”‚
    â”œâ”€ ç½®ä¿¡åº¦å¾—åˆ† (0-30 åˆ†):
    â”‚   â””â”€ å¹³å‡ç½®ä¿¡åº¦ Ã— 30
    â”‚
    â”œâ”€ ç±»å‹åŒ¹é…å¾—åˆ† (0-20 åˆ†):
    â”‚   â””â”€ ç±»å‹ä¸€è‡´æ€§ Ã— 20
    â”‚
    â””â”€ è¿è´¯æ€§å¾—åˆ† (0-10 åˆ†):
        â””â”€ æ—¶é—´çº¿è¿ç»­æ€§ Ã— 10
    â†“
    æ€»åˆ† = è¦†ç›–ç‡å¾—åˆ† + ç½®ä¿¡åº¦å¾—åˆ† + ç±»å‹åŒ¹é…å¾—åˆ† + è¿è´¯æ€§å¾—åˆ†
    â†“
â””â”€ ç”Ÿæˆæ”¹è¿›å»ºè®®:
    â”œâ”€ å¦‚æœè¦†ç›–ç‡ä½ â†’ å»ºè®®å¢åŠ å†…å®¹
    â”œâ”€ å¦‚æœç½®ä¿¡åº¦ä½ â†’ å»ºè®®äººå·¥å®¡æ ¸
    â”œâ”€ å¦‚æœç±»å‹ä¸åŒ¹é…å¤š â†’ å»ºè®®è°ƒæ•´æ”¹ç¼–ç­–ç•¥
    â””â”€ å¦‚æœè¿è´¯æ€§å·® â†’ å»ºè®®è°ƒæ•´æ—¶é—´çº¿
    â†“
â””â”€ è¾“å‡º: AlignmentQualityReport
    â”œâ”€ quality_score: int (0-100)
    â”œâ”€ coverage_score: int (0-40)
    â”œâ”€ confidence_score: int (0-30)
    â”œâ”€ type_matching_score: int (0-20)
    â”œâ”€ coherence_score: int (0-10)
    â”œâ”€ issues: List[str]
    â””â”€ suggestions: List[str]
```

**è´¨é‡æ ‡å‡†**:
- â‰¥ 85 åˆ†ï¼šä¼˜ç§€ï¼ˆå¯¹é½è´¨é‡é«˜ï¼‰
- 70-85 åˆ†ï¼šè‰¯å¥½ï¼ˆå¯æ¥å—ï¼‰
- 60-70 åˆ†ï¼šåŠæ ¼ï¼ˆå»ºè®®ä¼˜åŒ–ï¼‰
- < 60 åˆ†ï¼šä¸åˆæ ¼ï¼ˆå»ºè®®é‡æ–°å¯¹é½æˆ–äººå·¥å®¡æ ¸ï¼‰

---

#### Phase 7: å·¥ä»¶ä¿å­˜
```python
â””â”€ ArtifactManager.save_artifacts()
    â”œâ”€ alignment_result.json
    â”œâ”€ type_matching_report.json
    â”œâ”€ coverage_report.json
    â”œâ”€ adaptation_report.json
    â””â”€ alignment_quality_report.json
```

---

**è¾“å…¥**:
- `annotated_chapter` (AnnotatedChapter): Novel æ ‡æ³¨ç»“æœ
- `script_segmentation` (ScriptSegmentationResult): Script åˆ†æ®µç»“æœ
- `hook_detection` (Optional[HookDetectionResult]): Hook æ£€æµ‹ç»“æœ
- `project_name` (str): é¡¹ç›®åç§°
- `chapter_id` (str): ç« èŠ‚æ ‡è¯†
- `episode_id` (str): é›†æ•°æ ‡è¯†
- `config` (AlignmentConfig): é…ç½®å¯¹è±¡
  - `enable_hook_alignment` (bool): æ˜¯å¦å¯ç”¨ Hook å¯¹é½
  - `min_confidence_threshold` (float): æœ€ä½ç½®ä¿¡åº¦é˜ˆå€¼ (é»˜è®¤ 0.7)
  - `retry_config` (RetryConfig): é‡è¯•é…ç½®

**è¾“å‡º**: `AlignmentWorkflowResult`
```python
{
    "success": bool,
    "project_name": str,
    "chapter_id": str,
    "episode_id": str,
    "alignment_result": AlignmentResult,
    "type_matching_report": TypeMatchingReport,
    "coverage_report": CoverageReport,
    "adaptation_report": AdaptationReport,
    "quality_report": AlignmentQualityReport,
    "processing_time": float,
    "total_cost": float,
    "errors": List[str]
}
```

**ä¾èµ–å·¥å…·**:
- âœ… NovelScriptAligner

**ä¾èµ– Workflow**:
- âœ… NovelProcessingWorkflow (æä¾› AnnotatedChapter)
- ğŸš§ ScriptProcessingWorkflow (æä¾› ScriptSegmentationResult)

**å®ç°çŠ¶æ€**: ğŸš§ å¾…å¼€å‘  
**é¢„è®¡å®Œæˆ**: 2026-02-17  
**é¢„è®¡å¼€å‘æ—¶é—´**: 4-5 å¤©

**æˆæœ¬ä¼°ç®—**:
- å•ç« å¯¹é½æˆæœ¬: $0.08-0.12 USD
- 10ç« å¯¹é½æˆæœ¬: $0.80-1.20 USD

**æ€§èƒ½æŒ‡æ ‡**:
- å•ç« å¯¹é½æ—¶é—´: 1-3 åˆ†é’Ÿ

**è´¨é‡æ ‡å‡†**:
- AlignmentQualityReport è¯„åˆ† â‰¥ 85 åˆ†ï¼ˆä¼˜ç§€ï¼‰
- 70-85 åˆ†ï¼ˆè‰¯å¥½ï¼‰
- 60-70 åˆ†ï¼ˆåŠæ ¼ï¼Œå»ºè®®ä¼˜åŒ–ï¼‰
- < 60 åˆ†ï¼ˆä¸åˆæ ¼ï¼Œå»ºè®®é‡æ–°å¯¹é½ï¼‰

**æµ‹è¯•è®¡åˆ’**:
1. **å•å…ƒæµ‹è¯•**: æ¯ä¸ª Phase ç‹¬ç«‹æµ‹è¯•
2. **é›†æˆæµ‹è¯•**: å®Œæ•´å¯¹é½æµç¨‹ï¼ˆå¤©å‘½æ¡ƒèŠ± ch01 + ep01ï¼‰
3. **è¾¹ç•Œæµ‹è¯•**:
   - æœ‰ Hook çš„å¯¹é½
   - æ—  Hook çš„å¯¹é½
   - ä½è¦†ç›–ç‡åœºæ™¯
   - ç±»å‹ä¸åŒ¹é…åœºæ™¯
4. **è´¨é‡æµ‹è¯•**: äººå·¥è¯„ä¼°å¯¹é½å‡†ç¡®æ€§

---

## Phase III: ç»¼åˆç¼–æ’ä¸æ‰¹é‡å¤„ç† ğŸš§ (å¾…å¼€å‘ 0/3)

### ç›®æ ‡
æä¾›ç«¯åˆ°ç«¯çš„å®Œæ•´æµç¨‹ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†å’Œè´¨é‡ä¼˜åŒ–ã€‚

---

### Workflow 4: `FullPipelineWorkflow` ğŸš§ (å¾…å¼€å‘)

**ç›®æ ‡**: ä¸€é”®ä»åŸå§‹ç´ æåˆ°å¯¹é½åˆ†æå®Œæ•´æŠ¥å‘Š

**èŒè´£**:
- é¡¹ç›®åˆå§‹åŒ–
- å¹¶è¡Œå¤„ç† Novel å’Œ Script (ä¸²è¡Œ)
- è´¨é‡é—¨ç¦æ£€æŸ¥
- å¯¹é½åˆ†æ
- ç»¼åˆæŠ¥å‘Šç”Ÿæˆ
- å·¥ä»¶å½’æ¡£

**æµç¨‹å›¾**:
```
åŸå§‹ç´ æ (novel.txt + ep01.srt)
           â†“
    é¡¹ç›®åˆå§‹åŒ– (ç›®å½•åˆ›å»º)
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                              â”‚
    â”‚  ä¸²è¡Œå¤„ç†ï¼ˆé™ä½å¤æ‚åº¦ï¼‰        â”‚
    â”‚                              â”‚
    â”‚  1. NovelProcessingWorkflow  â”‚
    â”‚     â†“ AnnotatedChapter       â”‚
    â”‚                              â”‚
    â”‚  2. ScriptProcessingWorkflow â”‚
    â”‚     â†“ ScriptSegmentationResultâ”‚
    â”‚                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
    è´¨é‡é—¨ç¦æ£€æŸ¥ (â‰¥80/â‰¥75åˆ†)
               â†“
    AlignmentWorkflow
               â†“
    ç»¼åˆæŠ¥å‘Šç”Ÿæˆ (HTML + JSON)
               â†“
    å·¥ä»¶å½’æ¡£ (ç‰ˆæœ¬å¿«ç…§)
               â†“
    è¾“å‡º: ProjectReport
```

**Phase è®¾è®¡**:

#### Phase 1: é¡¹ç›®åˆå§‹åŒ– (å³æ—¶)
```python
â””â”€ åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„:
    â”œâ”€ data/projects/{project_name}/
    â”‚   â”œâ”€ raw/
    â”‚   â”‚   â”œâ”€ novel.txt
    â”‚   â”‚   â””â”€ ep01.srt
    â”‚   â”œâ”€ novel/
    â”‚   â”œâ”€ script/
    â”‚   â”œâ”€ alignment/
    â”‚   â””â”€ reports/
    â””â”€ éªŒè¯åŸå§‹ç´ æ:
        â”œâ”€ novel.txt å­˜åœ¨ä¸”å¯è¯»
        â””â”€ ep01.srt å­˜åœ¨ä¸”å¯è¯»
    â†“
â””â”€ ç”Ÿæˆé¡¹ç›®é…ç½®:
    â””â”€ project_config.json
    â†“
â””â”€ è¾“å‡º: é¡¹ç›®åˆå§‹åŒ–æˆåŠŸ
```

---

#### Phase 2: ä¸²è¡Œå¤„ç† Novel å’Œ Script (3-8åˆ†é’Ÿ)
```python
â””â”€ é¡ºåºæ‰§è¡Œ:
    â”œâ”€ 1. NovelProcessingWorkflow.run()
    â”‚      â†“ è¾“å‡º: NovelProcessingResult
    â”‚
    â””â”€ 2. ScriptProcessingWorkflow.run()
           â†“ è¾“å‡º: ScriptProcessingResult
    â†“
â””â”€ è¾“å‡º: Novel å¤„ç†ç»“æœ + Script å¤„ç†ç»“æœ
```

**è®¾è®¡ç†ç”±**: 
- ä¸²è¡Œæ‰§è¡Œé™ä½å¤æ‚åº¦ï¼Œé¿å…èµ„æºç«äº‰
- å¯åœ¨ Novel å¤„ç†æ—¶è¿›è¡Œä¸­æœŸæ£€æŸ¥
- ä¾¿äºè°ƒè¯•å’Œé”™è¯¯æ¢å¤

**æ€§èƒ½å½±å“**:
- ä¸²è¡Œæ€»æ—¶é—´ = Novel æ—¶é—´ + Script æ—¶é—´
- é¢„è®¡æ€»æ—¶é—´: 3-8 åˆ†é’Ÿï¼ˆå•ç«  + å•é›†ï¼‰

---

#### Phase 3: è´¨é‡é—¨ç¦æ£€æŸ¥ (5ç§’)
```python
â””â”€ æ£€æŸ¥ NovelValidationReport:
    â”œâ”€ è¦æ±‚è¯„åˆ† â‰¥ 80 åˆ†ï¼ˆä¸¥æ ¼æ ‡å‡†ï¼‰
    â”œâ”€ å¦‚æœ 60-80 åˆ† â†’ è­¦å‘Šï¼Œè¯¢é—®æ˜¯å¦ç»§ç»­
    â””â”€ å¦‚æœ < 60 åˆ† â†’ åœæ­¢ï¼Œè¦æ±‚ä¿®å¤
    â†“
â””â”€ æ£€æŸ¥ ScriptValidationReport:
    â”œâ”€ è¦æ±‚è¯„åˆ† â‰¥ 75 åˆ†ï¼ˆä¸¥æ ¼æ ‡å‡†ï¼‰
    â”œâ”€ å¦‚æœ 60-75 åˆ† â†’ è­¦å‘Šï¼Œè¯¢é—®æ˜¯å¦ç»§ç»­
    â””â”€ å¦‚æœ < 60 åˆ† â†’ åœæ­¢ï¼Œè¦æ±‚ä¿®å¤
    â†“
â””â”€ è¾“å‡º: 
    â”œâ”€ é€šè¿‡ â†’ ç»§ç»­å¯¹é½
    â”œâ”€ è­¦å‘Š â†’ è¯¢é—®ç”¨æˆ·å†³å®š
    â””â”€ å¤±è´¥ â†’ åœæ­¢å¹¶ç”Ÿæˆé—®é¢˜æŠ¥å‘Š
```

**è´¨é‡æ ‡å‡†** (ä¸¥æ ¼):
- Novel â‰¥ 80 åˆ†ï¼ˆé€šè¿‡ï¼‰
- Script â‰¥ 75 åˆ†ï¼ˆé€šè¿‡ï¼‰
- 60-80/60-75 åˆ†ï¼ˆè­¦å‘Šï¼‰
- < 60 åˆ†ï¼ˆåœæ­¢ï¼‰

---

#### Phase 4: å¯¹é½åˆ†æ (1-3åˆ†é’Ÿ)
```python
â””â”€ AlignmentWorkflow.run()
    â†“ è¾“å‡º: AlignmentWorkflowResult
```

---

#### Phase 5: ç»¼åˆæŠ¥å‘Šç”Ÿæˆ (10ç§’)
```python
â””â”€ æ±‡æ€»æŠ¥å‘Š:
    â”œâ”€ Novel å¤„ç†è´¨é‡æŠ¥å‘Š
    â”‚   â”œâ”€ è´¨é‡è¯„åˆ†: 88/100
    â”‚   â”œâ”€ ç« èŠ‚æ•°é‡: 10
    â”‚   â”œâ”€ äº‹ä»¶æ•°é‡: 50
    â”‚   â””â”€ ç³»ç»Ÿå…ƒç´ æ•°é‡: 15
    â”‚
    â”œâ”€ Script å¤„ç†è´¨é‡æŠ¥å‘Š
    â”‚   â”œâ”€ è´¨é‡è¯„åˆ†: 85/100
    â”‚   â”œâ”€ é›†æ•°: 10
    â”‚   â”œâ”€ æ®µè½æ•°é‡: 120
    â”‚   â””â”€ Hook æ£€æµ‹: ep01 æœ‰ Hook (45.6ç§’)
    â”‚
    â”œâ”€ å¯¹é½è´¨é‡æŠ¥å‘Š
    â”‚   â”œâ”€ è´¨é‡è¯„åˆ†: 90/100
    â”‚   â”œâ”€ äº‹ä»¶è¦†ç›–ç‡: 95%
    â”‚   â”œâ”€ è®¾å®šè¦†ç›–ç‡: 85%
    â”‚   â””â”€ å¹³å‡ç½®ä¿¡åº¦: 0.92
    â”‚
    â”œâ”€ æ”¹ç¼–ç­–ç•¥ç»Ÿè®¡
    â”‚   â”œâ”€ exact: 5%
    â”‚   â”œâ”€ paraphrase: 70%
    â”‚   â”œâ”€ summarize: 20%
    â”‚   â””â”€ expand: 5%
    â”‚
    â””â”€ è¦†ç›–ç‡å¯è§†åŒ–
        â””â”€ (ç”Ÿæˆå›¾è¡¨æ•°æ®)
    â†“
â””â”€ ç”Ÿæˆ HTML æŠ¥å‘Š:
    â””â”€ project_report.html
    â†“
â””â”€ ç”Ÿæˆ JSON æ•°æ®:
    â””â”€ project_report.json
```

**æŠ¥å‘Šå†…å®¹**:
- è´¨é‡è¯„åˆ†æ€»è§ˆ
- å¤„ç†æ—¶é—´ä¸æˆæœ¬ç»Ÿè®¡
- å…³é”®æŒ‡æ ‡å¯è§†åŒ–
- é—®é¢˜åˆ—è¡¨ä¸æ”¹è¿›å»ºè®®
- è¯¦ç»†æ•°æ®ä¸‹è½½é“¾æ¥

---

#### Phase 6: å·¥ä»¶å½’æ¡£ (å³æ—¶)
```python
â””â”€ ArtifactManager.create_snapshot()
    â”œâ”€ ä¿å­˜æ‰€æœ‰ä¸­é—´ç»“æœ
    â”œâ”€ ä¿å­˜æœ€ç»ˆæŠ¥å‘Š
    â””â”€ ç”Ÿæˆç‰ˆæœ¬å¿«ç…§
        â””â”€ snapshot_{timestamp}.zip
```

---

**è¾“å…¥**:
- `novel_path` (str): åŸå§‹å°è¯´æ–‡ä»¶è·¯å¾„
- `srt_path` (str): SRT æ–‡ä»¶è·¯å¾„
- `project_name` (str): é¡¹ç›®åç§°
- `config` (FullPipelineConfig): é…ç½®å¯¹è±¡
  - `chapter_range` (Tuple[int, int]): ç« èŠ‚èŒƒå›´
  - `episode_id` (str): é›†æ•°æ ‡è¯†
  - `quality_threshold` (Dict[str, int]): è´¨é‡é—¨ç¦é˜ˆå€¼
    - `novel_min_score`: 80 (ä¸¥æ ¼)
    - `script_min_score`: 75 (ä¸¥æ ¼)
    - `alignment_min_score`: 70
  - `stop_on_quality_failure` (bool): è´¨é‡ä¸è¾¾æ ‡æ—¶æ˜¯å¦åœæ­¢ï¼ˆé»˜è®¤ Trueï¼‰

**è¾“å‡º**: `ProjectReport`
```python
{
    "success": bool,
    "project_name": str,
    "novel_result": NovelProcessingResult,
    "script_result": ScriptProcessingResult,
    "alignment_result": AlignmentWorkflowResult,
    "overall_quality_score": int,
    "processing_summary": {
        "total_time": float,
        "total_cost": float,
        "novel_chapters": int,
        "script_episodes": int,
        "alignment_pairs": int
    },
    "report_files": {
        "html_report": str,
        "json_report": str,
        "snapshot": str
    },
    "errors": List[str]
}
```

**ä¾èµ– Workflow**:
- âœ… NovelProcessingWorkflow
- ğŸš§ ScriptProcessingWorkflow
- ğŸš§ AlignmentWorkflow

**å®ç°çŠ¶æ€**: ğŸš§ å¾…å¼€å‘  
**é¢„è®¡å®Œæˆ**: 2026-02-20  
**é¢„è®¡å¼€å‘æ—¶é—´**: 2-3 å¤©

**æˆæœ¬ä¼°ç®—**:
- å•æ¬¡å®Œæ•´æµç¨‹ (1ç«  + 1é›†): $0.30-0.50 USD
- 10ç«  + 10é›†: $3.00-5.00 USD

**æ€§èƒ½æŒ‡æ ‡**:
- å•æ¬¡å®Œæ•´æµç¨‹: 4-11 åˆ†é’Ÿï¼ˆä¸²è¡Œï¼‰

**è´¨é‡æ ‡å‡†** (ä¸¥æ ¼):
- Novel â‰¥ 80 åˆ†
- Script â‰¥ 75 åˆ†
- Alignment â‰¥ 70 åˆ†

**æµ‹è¯•è®¡åˆ’**:
1. **é›†æˆæµ‹è¯•**: å®Œæ•´æµç¨‹ï¼ˆå¤©å‘½æ¡ƒèŠ± ch01-10 + ep01-10ï¼‰
2. **è´¨é‡é—¨ç¦æµ‹è¯•**: ä½è´¨é‡æ•°æ®æ‹¦æˆª
3. **é”™è¯¯æ¢å¤æµ‹è¯•**: ä¸­æ–­åç»­ä¼ 
4. **æ€§èƒ½æµ‹è¯•**: 10ç«  + 10é›†å¤„ç†æ—¶é—´

---

### Workflow 5: `BatchProcessingWorkflow` ğŸ”œ (P2ä¼˜å…ˆçº§)

**ç›®æ ‡**: æ‰¹é‡å¤„ç†å¤šä¸ªé¡¹ç›®ï¼Œæ”¯æŒå¹¶è¡Œå’Œå¢é‡æ›´æ–°

**èŒè´£**:
- æ‰¹é‡ä»»åŠ¡è§„åˆ’
- å¹¶è¡Œå¤„ç†ï¼ˆåŠ¨æ€è°ƒåº¦ï¼‰
- ç»“æœæ±‡æ€»ä¸ç»Ÿè®¡

**æµç¨‹å›¾**:
```
é¡¹ç›®åˆ—è¡¨
    â†“
æ‰¹é‡ä»»åŠ¡è§„åˆ’ (æ‰«æã€å»é‡ã€ä¼˜å…ˆçº§æ’åº)
    â†“
å¹¶è¡Œå¤„ç† (èµ„æºæ± ç®¡ç†)
    â”œâ”€ FullPipelineWorkflow (é¡¹ç›®1)
    â”œâ”€ FullPipelineWorkflow (é¡¹ç›®2)
    â””â”€ FullPipelineWorkflow (é¡¹ç›®3)
    â†“
ç»“æœæ±‡æ€»ä¸ç»Ÿè®¡
    â†“
æ‰¹é‡å¤„ç†æŠ¥å‘Š
```

**å…³é”®è®¾è®¡ç‚¹**:
1. **å¢é‡å¤„ç†**: åªå¤„ç†æ–°å¢æˆ–å˜æ›´çš„é¡¹ç›®
2. **å¹¶å‘æ§åˆ¶**: åŠ¨æ€è°ƒæ•´å¹¶å‘æ•°ï¼Œé¿å… API é™æµ
3. **å¤±è´¥éš”ç¦»**: å•ä¸ªé¡¹ç›®å¤±è´¥ä¸å½±å“å…¶ä»–é¡¹ç›®
4. **æˆæœ¬ä¼˜åŒ–**: æ‰¹é‡ LLM è°ƒç”¨ï¼Œé™ä½å•ä»·

**é¢„è®¡å¼€å‘æ—¶é—´**: 3-4 å¤©

---

### Workflow 6: `QualityOptimizationWorkflow` ğŸ”œ (P2ä¼˜å…ˆçº§)

**ç›®æ ‡**: å¯¹ä½è´¨é‡è¾“å‡ºè¿›è¡Œè‡ªåŠ¨ä¼˜åŒ–å’Œä¿®å¤

**èŒè´£**:
- è´¨é‡é—®é¢˜è¯Šæ–­
- é’ˆå¯¹æ€§ä¿®å¤
- éªŒè¯ä¸å¯¹æ¯”

**æµç¨‹å›¾**:
```
è´¨é‡æŠ¥å‘Š (<60åˆ†)
    â†“
è´¨é‡é—®é¢˜è¯Šæ–­ (è¯†åˆ«é—®é¢˜ç±»å‹)
    â”œâ”€ è¿‡åº¦åˆ†æ®µ â†’ é‡æ–°è¿è¡Œ Segmenter (è°ƒæ•´é˜ˆå€¼)
    â”œâ”€ å¯¹é½é”™è¯¯ â†’ é‡æ–°è¿è¡Œ Aligner (å¢åŠ ä¸Šä¸‹æ–‡)
    â””â”€ ç±»å‹ä¸åŒ¹é… â†’ é‡æ–°è¿è¡Œ Segmenter (å¼ºåŒ– ABC)
    â†“
éªŒè¯ä¸å¯¹æ¯” (A/B æµ‹è¯•)
    â”œâ”€ æ”¹è¿›æ˜¾è‘— (+10åˆ†) â†’ ä¿å­˜ä¿®å¤ç»“æœ
    â””â”€ æ”¹è¿›ä¸æ˜æ˜¾ â†’ å›æ»šï¼Œè®°å½•å¤±è´¥åŸå› 
```

**å…³é”®è®¾è®¡ç‚¹**:
1. **é—®é¢˜åˆ†ç±»**: è‡ªåŠ¨è¯†åˆ«é—®é¢˜ç±»å‹
2. **ä¿®å¤ç­–ç•¥åº“**: é¢„å®šä¹‰å¸¸è§é—®é¢˜çš„ä¿®å¤æ–¹æ¡ˆ
3. **A/B å¯¹æ¯”**: ä¿®å¤å‰åå¯¹æ¯”ï¼Œç¡®ä¿æ”¹è¿›
4. **å­¦ä¹ æœºåˆ¶**: è®°å½•æˆåŠŸçš„ä¿®å¤æ¡ˆä¾‹ï¼ŒæŒç»­ä¼˜åŒ–

**é¢„è®¡å¼€å‘æ—¶é—´**: 4-5 å¤©

---

## Phase IV: é«˜çº§åŠŸèƒ½ï¼ˆæœªæ¥è§„åˆ’ï¼‰ğŸ”®

### Workflow 7: `GenerationWorkflow` ğŸ”® (P3ä¼˜å…ˆçº§)

**ç›®æ ‡**: åŸºäºå¯¹é½åˆ†æï¼Œç”Ÿæˆæ–°çš„æ”¹ç¼–å†…å®¹

**å½“å‰çŠ¶æ€**: æš‚ä¸å¼€å‘ï¼Œéœ€è¦æ›´å¤šå·¥å…·æ”¯æŒ

**å‰ç½®ä¾èµ–**:
- WriterAgent (æœªå¼€å‘)
- ContentPlannerAgent (æœªå¼€å‘)
- QualityEvaluatorAgent (æœªå¼€å‘)

---

## ğŸ“‹ Workflow å¼€å‘æ£€æŸ¥æ¸…å•

æ¯ä¸ª Workflow å¼€å‘æ—¶å¿…é¡»å®Œæˆï¼š

### è®¾è®¡é˜¶æ®µ
- [ ] **Phase æ‹†åˆ†**: å°†æµç¨‹æ‹†åˆ†ä¸º 5-8 ä¸ªç‹¬ç«‹ Phase
- [ ] **è¾“å…¥è¾“å‡ºå®šä¹‰**: æ˜ç¡®æ¯ä¸ª Phase çš„è¾“å…¥è¾“å‡º
- [ ] **å·¥å…·ä¾èµ–**: åˆ—å‡ºæ‰€æœ‰ä¾èµ–çš„å·¥å…·å’Œ Workflow
- [ ] **æˆæœ¬ä¼°ç®—**: è®¡ç®— LLM è°ƒç”¨æˆæœ¬
- [ ] **æ€§èƒ½æŒ‡æ ‡**: é¢„ä¼°å¤„ç†æ—¶é—´

### å®ç°é˜¶æ®µ
- [ ] **ç»§æ‰¿ BaseWorkflow**: å®ç° `run()` æ–¹æ³•
- [ ] **Schema å®šä¹‰**: åœ¨ `src/core/schemas_*.py` å®šä¹‰æ•°æ®æ¨¡å‹
- [ ] **Phase æ–¹æ³•**: æ¯ä¸ª Phase ç‹¬ç«‹æ–¹æ³•ï¼Œå¯å•ç‹¬æµ‹è¯•
- [ ] **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æ•è·å’Œé”™è¯¯ä¿¡æ¯
- [ ] **æ–­ç‚¹ç»­ä¼ **: å…³é”® Phase å®Œæˆåä¿å­˜ä¸­é—´ç»“æœ
- [ ] **æ—¥å¿—è®°å½•**: ä½¿ç”¨ `logging` æ¨¡å—ï¼Œè®°å½•å…³é”®æ“ä½œ

### æ–‡æ¡£é˜¶æ®µ
- [ ] **Docstring**: Google Style docstringsï¼ˆç±»å’Œæ–¹æ³•ï¼‰
- [ ] **ç‹¬ç«‹æ–‡æ¡£**: åˆ›å»º `docs/workflows/{workflow_name}.md`
- [ ] **æµç¨‹å›¾**: ç»˜åˆ¶ Mermaid æµç¨‹å›¾
- [ ] **ä½¿ç”¨ç¤ºä¾‹**: æä¾›ä»£ç ç¤ºä¾‹

### æµ‹è¯•é˜¶æ®µ
- [ ] **å•å…ƒæµ‹è¯•**: æ¯ä¸ª Phase ç‹¬ç«‹æµ‹è¯•
- [ ] **é›†æˆæµ‹è¯•**: å®Œæ•´æµç¨‹æµ‹è¯•
- [ ] **è¾¹ç•Œæµ‹è¯•**: å¼‚å¸¸æƒ…å†µæµ‹è¯•
- [ ] **æ€§èƒ½æµ‹è¯•**: å¤„ç†æ—¶é—´å’Œæˆæœ¬éªŒè¯

### è´¨é‡ä¿è¯
- [ ] **è´¨é‡é—¨ç¦**: å…³é”®èŠ‚ç‚¹è´¨é‡æ£€æŸ¥
- [ ] **æˆæœ¬ç›‘æ§**: å®é™…æˆæœ¬ä¸é¢„ç®—å¯¹æ¯”
- [ ] **é”™è¯¯æ¢å¤æµ‹è¯•**: ä¸­æ–­åç»­ä¼ åŠŸèƒ½
- [ ] **å¹¶å‘æµ‹è¯•**: å¹¶è¡Œå¤„ç†ç¨³å®šæ€§ï¼ˆå¦‚é€‚ç”¨ï¼‰

---

## ğŸ“Š å½“å‰çŠ¶æ€æ€»ç»“

**æ€»ä½“è¿›åº¦**: 2/7 workflows å®Œæˆ (29%)

**Phase I: æ ¸å¿ƒç´ æå¤„ç†** âœ… å·²å®Œæˆ (2/2)
- âœ… NovelProcessingWorkflow (æµ‹è¯•ä¸­)
- âœ… ScriptProcessingWorkflow (å·²å®Œæˆï¼Œå¾…æµ‹è¯•)

**Phase II: å¯¹é½åˆ†æ** ğŸš§ å¾…å¼€å‘ (0/1)
- ğŸš§ AlignmentWorkflow (å¾…å¼€å‘ï¼Œé¢„è®¡ 4-5å¤©)

**Phase III: ç»¼åˆç¼–æ’** ğŸš§ å¾…å¼€å‘ (0/3)
- ğŸš§ FullPipelineWorkflow (å¾…å¼€å‘ï¼Œé¢„è®¡ 2-3å¤©)
- ğŸ”œ BatchProcessingWorkflow (P2ä¼˜å…ˆçº§ï¼Œé¢„è®¡ 3-4å¤©)
- ğŸ”œ QualityOptimizationWorkflow (P2ä¼˜å…ˆçº§ï¼Œé¢„è®¡ 4-5å¤©)

**Phase IV: é«˜çº§åŠŸèƒ½** ğŸ”® æœªæ¥è§„åˆ’ (0/1)
- ğŸ”® GenerationWorkflow (P3ä¼˜å…ˆçº§ï¼Œå¾…å®š)

---

## ğŸ¯ å¼€å‘ä¼˜å…ˆçº§ä¸æ—¶é—´è§„åˆ’

### ç¬¬ä¸€é˜¶æ®µ (2å‘¨) - P0 æ ¸å¿ƒæµç¨‹ â³ è¿›è¡Œä¸­
| åºå· | Workflow | å®é™…æ—¶é—´ | ä¾èµ– | çŠ¶æ€ |
|-----|----------|---------|------|------|
| 1 | NovelProcessingWorkflow | - | âœ… å·¥å…·å®Œæˆ | âœ… æµ‹è¯•ä¸­ |
| 2 | ScriptProcessingWorkflow | 1å¤© (2026-02-10) | âœ… å·¥å…·å®Œæˆ | âœ… å·²å®Œæˆ |
| 3 | AlignmentWorkflow | é¢„è®¡4-5å¤© | ä¾èµ– 1+2 | ğŸš§ å¾…å¼€å‘ |

**é‡Œç¨‹ç¢‘**: å®Œæˆ Novelâ†’Script å®Œæ•´å¯¹é½æµç¨‹

---

### ç¬¬äºŒé˜¶æ®µ (1å‘¨) - P1 ç»¼åˆç¼–æ’
| åºå· | Workflow | é¢„è®¡æ—¶é—´ | ä¾èµ– | çŠ¶æ€ |
|-----|----------|---------|------|------|
| 4 | FullPipelineWorkflow | 2-3å¤© | ä¾èµ– 1+2+3 | ğŸš§ å¾…å¼€å‘ |

**é‡Œç¨‹ç¢‘**: ä¸€é”®ç«¯åˆ°ç«¯å¤„ç†æµç¨‹

---

### ç¬¬ä¸‰é˜¶æ®µ (è§†éœ€æ±‚) - P2 é«˜çº§åŠŸèƒ½
| åºå· | Workflow | é¢„è®¡æ—¶é—´ | ä¾èµ– | çŠ¶æ€ |
|-----|----------|---------|------|------|
| 5 | BatchProcessingWorkflow | 3-4å¤© | ä¾èµ– 4 | ğŸ”œ å¾…å®š |
| 6 | QualityOptimizationWorkflow | 4-5å¤© | ä¾èµ– 1+2+3 | ğŸ”œ å¾…å®š |

**é‡Œç¨‹ç¢‘**: æ‰¹é‡å¤„ç†å’Œè‡ªåŠ¨ä¼˜åŒ–

---

### ç¬¬å››é˜¶æ®µ (æœªæ¥è§„åˆ’) - P3 ç”ŸæˆåŠŸèƒ½
| åºå· | Workflow | é¢„è®¡æ—¶é—´ | ä¾èµ– | çŠ¶æ€ |
|-----|----------|---------|------|------|
| 7 | GenerationWorkflow | å¾…å®š | éœ€æ–°å·¥å…· | ğŸ”® æœªæ¥ |

**é‡Œç¨‹ç¢‘**: å†…å®¹ç”Ÿæˆèƒ½åŠ›

---

## ğŸ’° æˆæœ¬ä¸æ€§èƒ½æ€»è§ˆ

### å•æ¬¡å¤„ç†æˆæœ¬ (1ç«  + 1é›†)
| Workflow | LLM æˆæœ¬ | å¤„ç†æ—¶é—´ | è´¨é‡è¦æ±‚ |
|----------|---------|---------|---------|
| NovelProcessingWorkflow | $0.20-0.30 | 2-5 åˆ†é’Ÿ | â‰¥ 80 åˆ† |
| ScriptProcessingWorkflow | $0.09-0.19 | 2-4 åˆ†é’Ÿ | â‰¥ 75 åˆ† |
| AlignmentWorkflow | $0.08-0.12 | 1-3 åˆ†é’Ÿ | â‰¥ 70 åˆ† |
| **FullPipelineWorkflow** | **$0.37-0.61** | **5-12 åˆ†é’Ÿ** | **ç»¼åˆè¯„ä¼°** |

### æ‰¹é‡å¤„ç†æˆæœ¬ (10ç«  + 10é›†)
| Workflow | LLM æˆæœ¬ | å¤„ç†æ—¶é—´ | å¤‡æ³¨ |
|----------|---------|---------|------|
| NovelProcessingWorkflow | $2.00-3.00 | 10-15 åˆ†é’Ÿ | å¹¶è¡Œå¤„ç† |
| ScriptProcessingWorkflow | $0.60-1.20 | 15-30 åˆ†é’Ÿ | ä¸²è¡Œå¤„ç† |
| AlignmentWorkflow | $0.80-1.20 | 10-30 åˆ†é’Ÿ | é€ç« å¯¹é½ |
| **FullPipelineWorkflow** | **$3.40-5.40** | **35-75 åˆ†é’Ÿ** | **ä¸²è¡Œæ‰§è¡Œ** |

---

## ğŸ“ å¾…ç¡®è®¤é—®é¢˜ä¸å†³ç­–è®°å½•

### å·²ç¡®è®¤ âœ…
1. **å¼€å‘é¡ºåº**: ScriptProcessingWorkflow â†’ AlignmentWorkflow â†’ FullPipelineWorkflow âœ…
2. **æµ‹è¯•ç­–ç•¥**: ç«‹å³æµ‹è¯•ï¼ˆæ¯ä¸ª workflow å¼€å‘å®Œæˆåç«‹å³æµ‹è¯•ï¼‰âœ…
3. **ScriptTagger å·¥å…·**: å…ˆå®Œæˆ ScriptTagger å·¥å…·ï¼ˆP2ä¼˜å…ˆçº§ï¼‰âœ…
4. **å¹¶è¡Œåº¦**: FullPipelineWorkflow å¯ä»¥ä¸²è¡Œï¼Œé™ä½å¤æ‚åº¦ âœ…
5. **è´¨é‡é—¨ç¦é˜ˆå€¼**: éœ€è¦å®é™…æµ‹è¯•è°ƒè¯•ï¼Œè¦ä¸¥æ ¼ä¸€ç‚¹ï¼ˆ80/75/70ï¼‰âœ…

### å¾…ç¡®è®¤ â³
1. **æ‰¹é‡å¤„ç†ä¼˜å…ˆçº§**: BatchProcessingWorkflow æ˜¯å¦åœ¨ç¬¬äºŒé˜¶æ®µå°±å¼€å‘ï¼Ÿ
2. **è´¨é‡ä¼˜åŒ–ç­–ç•¥**: QualityOptimizationWorkflow çš„ä¿®å¤ç­–ç•¥åº“å¦‚ä½•ç§¯ç´¯ï¼Ÿ
3. **æŠ¥å‘Šæ ¼å¼**: HTML æŠ¥å‘Šçš„å¯è§†åŒ–éœ€æ±‚ï¼ˆå›¾è¡¨ç±»å‹ã€äº¤äº’åŠŸèƒ½ï¼‰ï¼Ÿ
4. **æˆæœ¬é¢„ç®—**: é¡¹ç›®é¢„ç®—ä¸Šé™ï¼Œæ˜¯å¦éœ€è¦æˆæœ¬å‘Šè­¦æœºåˆ¶ï¼Ÿ
5. **å¹¶å‘é™åˆ¶**: BatchProcessingWorkflow çš„å¹¶å‘æ•°é‡å¦‚ä½•é…ç½®ï¼Ÿ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- [DEV_STANDARDS.md](../DEV_STANDARDS.md) - å¼€å‘è§„èŒƒ
- [tools/ROADMAP.md](../tools/ROADMAP.md) - å·¥å…·å¼€å‘è·¯çº¿å›¾
- [PROJECT_STRUCTURE.md](../PROJECT_STRUCTURE.md) - é¡¹ç›®ç»“æ„

### Workflow æ–‡æ¡£
- [novel_processing_workflow.md](novel_processing_workflow.md) - Novel å¤„ç†å·¥ä½œæµ
- [training_workflow.md](training_workflow.md) - è®­ç»ƒå·¥ä½œæµï¼ˆçƒ­åº¦é©±åŠ¨ï¼‰

### æ¶æ„æ–‡æ¡£
- [architecture/logic_flows.md](../architecture/logic_flows.md) - é€»è¾‘æµç¨‹å›¾ï¼ˆå¾…åˆ›å»ºï¼‰

---

**æœ€åæ›´æ–°**: 2026-02-10  
**ä¸‹ä¸€æ­¥**: å¼€å‘ AlignmentWorkflowï¼ˆé¢„è®¡ 2026-02-17 å®Œæˆï¼‰
